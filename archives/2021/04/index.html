
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="codexdawn">
    <title>Archives: 2021/4 - codexdawn</title>
    <meta name="author" content="codexdawn">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="codexdawn">
<meta property="og:url" content="https://codexdawn.github.io/archives/2021/04/index.html">
<meta property="og:site_name" content="codexdawn">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="codexdawn">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-3sspfygaapf5d6tbrnqmyrhdcstv0iwwmi4wor2yeip9c44sowy9gbdzyyjm.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            codexdawn
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/codexdawn"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.facebook.com/beherzt.dev"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/in/sim-jisung-3048872a/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:cloudkaiser@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/04/19/high-end-mapping/"
                            aria-label=": high-end-mapping"
                        >
                            high-end-mapping
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-04-19T11:09:38+00:00">
	
		    Apr 19, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%EA%B3%A0%EA%B8%89-%EB%A7%A4%ED%95%91/">고급 매핑</a>, <a class="category-link" href="/categories/%EC%9E%90%EB%B0%94ORM%ED%91%9C%EC%A4%80JPA%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D/">자바ORM표준JPA프로그래밍</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="고급매핑"><a href="#고급매핑" class="headerlink" title="고급매핑"></a>고급매핑</h1><blockquote><p>고급매핑에서 배울 내용들 정리 </p>
<ol>
<li>상속관계 매핑 : 객체의 상속관계를 DB에 어떻게 매핑하는지 </li>
<li>@MappedSuperclass : 등록일,수정일 같이 여러 엔티티에서 공통으로 사용하는 매핑정보만 상속받고 싶으면 이 기능을 활용한다. </li>
<li>복합키와 식별관계 매핑 : DB의 식별자가 하나 이상일때 매핑하는 방법. 그리고 DB설계에서 이야기하는 식별관계와 비식별관계에 대해서 다룬다. </li>
<li>조인 테이블 : 테이블은 외래키 하나로 연관관계를 맺을 수 있지만 연관관계를 관리하는 연결 테이블을 두는 방법도 있다. 여기서는 연결 테이블을 매핑하는 방법을 다룬다. </li>
<li>엔티티 하나에 여러 테이블 매핑하기 : 보통 엔티티 하나에 테이블 하나를 매핑하지만 엔티티 하나에 여러 테이블을 매핑하는 방법도 있다.   </li>
</ol>
</blockquote>

<h2 id="1-상속관계-매핑"><a href="#1-상속관계-매핑" class="headerlink" title="1. 상속관계 매핑"></a>1. 상속관계 매핑</h2><h3 id="1-1-조인-전략"><a href="#1-1-조인-전략" class="headerlink" title="1-1. 조인 전략"></a>1-1. 조인 전략</h3><p>![조인전략 예시](/image/join inheritence.png)</p>
<img src="/.io//04/19/high-end-mapping/join%20inheritence.png" class title="조인전략 예시">

<figure class="highlight java"><figcaption><span>조인전략예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Inheritance(strategy = Inheritence.JOINED)</span></span><br><span class="line"><span class="meta">@DiscriminatorColumn(name = &quot;DTYPE&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name = &quot;item_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> price; </span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//...setter/getter생략</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="meta">@DiscriminatorValue(&quot;A&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Album</span> <span class="keyword">extends</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String artist; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="meta">@DiscriminatorValue(&quot;M&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Movie</span> <span class="keyword">extends</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String director; </span><br><span class="line">	<span class="keyword">private</span> String actor; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="장점"><a href="#장점" class="headerlink" title="장점"></a>장점</h4><ul>
<li>테이블이 정규화 됨 </li>
<li>외래키 참조 무결성 제약조건을 활용할수 있다.</li>
<li>저장공간을 효율적으로 사용함 </li>
</ul>
<h4 id="단점"><a href="#단점" class="headerlink" title="단점"></a>단점</h4><ul>
<li>조회할때 조인이 많이 사용되므로 성능이 저하될수 있다. </li>
<li>조회 쿼리가 복잡하다. </li>
<li>데이터를 등록할 insert sql을 두번 실행됨. </li>
</ul>
<h3 id="1-2-단일-테이블-전략"><a href="#1-2-단일-테이블-전략" class="headerlink" title="1-2. 단일 테이블 전략"></a>1-2. 단일 테이블 전략</h3><p>![조인테이블 전략 예시](/image/high-end-mapping/single table.png)</p>
<figure class="highlight java"><figcaption><span>단일테이블 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Inheritance(strategy = Inheritence.SINGLE_TABLE)</span></span><br><span class="line"><span class="meta">@DiscriminatorColumn(name = &quot;DTYPE&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name = &quot;item_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> price; </span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//...setter/getter생략</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="meta">@DiscriminatorValue(&quot;A&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Album</span> <span class="keyword">extends</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String artist; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="meta">@DiscriminatorValue(&quot;M&quot;)</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Movie</span> <span class="keyword">extends</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String director; </span><br><span class="line">	<span class="keyword">private</span> String actor; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="장점-1"><a href="#장점-1" class="headerlink" title="장점"></a>장점</h4><ul>
<li>조인이 필요없으므로 일반적으로 조회성능이 빠름.</li>
<li>조회 쿼리가 단순해짐 </li>
</ul>
<h4 id="단점-1"><a href="#단점-1" class="headerlink" title="단점"></a>단점</h4><ul>
<li>자식 엔티티가 매핑한 컬럼은 모두 null을 허용해야한다.</li>
<li>단일 테이블에 모든것을 저장하므로 테이블이 커질수 있다. 상황에 따라서는 조회성능이 오히려 느려질수도 있음. </li>
</ul>
<h4 id="특징"><a href="#특징" class="headerlink" title="특징"></a>특징</h4><ul>
<li>구분 컬럼을 꼭 사용해야함. (@DiscriminatorColumn)</li>
<li>구분 컬럼 지정안하면 엔티티 이름으로 자동 지정됨. </li>
</ul>
<h3 id="1-3-구현-클래스마다-테이블-전략"><a href="#1-3-구현-클래스마다-테이블-전략" class="headerlink" title="1-3. 구현 클래스마다 테이블 전략"></a>1-3. 구현 클래스마다 테이블 전략</h3><p><img src="/.io//table-per-concrete-class.png" alt="구현 클래스마다 테이블 전략"></p>
<figure class="highlight java"><figcaption><span>구현클래스마다 테이블 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Inheritance(strategy = Inheritence.TABLE_PER_CLASS)</span></span><br><span class="line"><span class="meta">@DiscriminatorColumn(name = &quot;DTYPE&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name = &quot;item_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">int</span> price; </span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//...setter/getter생략</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Album</span> <span class="keyword">extends</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String artist; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Movie</span> <span class="keyword">extends</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String director; </span><br><span class="line">	<span class="keyword">private</span> String actor; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="장점-2"><a href="#장점-2" class="headerlink" title="장점"></a>장점</h4><ul>
<li>서브타입을 구분해서 처리할때 효과적 </li>
<li>not null 제약조건을 사용할수 있음.</li>
</ul>
<h4 id="단점-2"><a href="#단점-2" class="headerlink" title="단점"></a>단점</h4><ul>
<li>여러 자식 테이블을 함께 조회할때 성능이 느림(union사용해야함) </li>
<li>자식 테이블을 통합해서 관리하기 어려움 </li>
</ul>
<h4 id="특징-1"><a href="#특징-1" class="headerlink" title="특징"></a>특징</h4><ul>
<li>구분 컬럼을 사용안함</li>
<li>일반적으로 사용안하길 권장되는 전략 </li>
</ul>
<h2 id="2-MappedSuperclass"><a href="#2-MappedSuperclass" class="headerlink" title="2. @MappedSuperclass"></a>2. @MappedSuperclass</h2><p><img src="/.io//mappedsuperclass.png" alt="@MappedSuperClass"></p>
<figure class="highlight java"><figcaption><span>MappedSuperClass예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@MappedSuperClass</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">BaseEntity</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line"></span><br><span class="line">	<span class="comment">//...setter/getter생략</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@AttributeOverrides(</span></span><br><span class="line"><span class="meta">	@AttributeOverride(name = &quot;id&quot;, column= @Column(name = &quot;member_id&quot;)),</span></span><br><span class="line"><span class="meta">	@AttributeOverride(name = &quot;name&quot;, column = @Column(name=&quot;member_name&quot;))</span></span><br><span class="line"><span class="meta">)</span> <span class="comment">// 부모로부터 물려받은 매핑정보를 재정의 위와 같이 재정의 할수 있음. </span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Member</span> <span class="keyword">extends</span> <span class="title">BaseEntity</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String email; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Seller</span> <span class="keyword">extends</span> <span class="title">BaseEntity</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String shopName; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="특징-2"><a href="#특징-2" class="headerlink" title="특징"></a>특징</h4><ul>
<li>상속관계 매핑이 아니다. </li>
<li>@MappedSuperClass로 지정된 클래스는 엔티티가 아니므로, em.find 혹은 JPQL 조회 불가능 하다.</li>
<li>부모 클래스를 상속받는 자식클래스에 매핑정보만 제공 </li>
<li>이 클래스를 직접 사용할일이 없기때문에 추상클래스로 만드는걸 권장함 </li>
<li>테이블과 관계없고 단순히 엔티티가 공통으로 사용하는 매핑정보를 모으는 역할 </li>
<li>주로 등록일, 수정일, 등록자, 수정자 같은 전체 엔티티에서 공통으로 적용하는 정보를 모을때 사용 </li>
<li>참고 : @Entity 클래스는 엔티티나 @MappedSuperClass로 지정한 클래스만 사속 가능 </li>
</ul>
<h2 id="3-복합키와-식별관계-매핑"><a href="#3-복합키와-식별관계-매핑" class="headerlink" title="3. 복합키와 식별관계 매핑"></a>3. 복합키와 식별관계 매핑</h2><h3 id="3-1-식별관계-VS-비식별관계"><a href="#3-1-식별관계-VS-비식별관계" class="headerlink" title="3-1. 식별관계 VS 비식별관계"></a>3-1. 식별관계 VS 비식별관계</h3><h4 id="식별관계"><a href="#식별관계" class="headerlink" title="식별관계"></a>식별관계</h4><ul>
<li>식별관계는 부모 테이블의 기본키를 내려받아서 자식테이블의 (기본키+외래키) 로 사용하는 관계 </li>
</ul>
<h4 id="비식별관계"><a href="#비식별관계" class="headerlink" title="비식별관계"></a>비식별관계</h4><ul>
<li>부모테이블의 기본키를 받아서 자식 테이블의 외래키로만 사용하는 관계 </li>
</ul>
<h5 id="3-1-1-복합키-비식별-관계-매핑"><a href="#3-1-1-복합키-비식별-관계-매핑" class="headerlink" title="3-1-1. 복합키 : 비식별 관계 매핑"></a>3-1-1. 복합키 : 비식별 관계 매핑</h5><p>JPA는 복합키 지원을 위해 @IdClass와 @EmbeddedId 2가지 방법을 제공하는데 @IdClass는 관계형데이터베이스에 가까운 방법이고, @EmbeddedId는 좀 더 객체지향에 가까운 방법이다. </p>
<h6 id="IdClass"><a href="#IdClass" class="headerlink" title="@IdClass"></a>@IdClass</h6><figure class="highlight java"><figcaption><span>복합키 IdClass예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@IdClass(ParentId.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> </span><br><span class="line">	<span class="meta">@Column(name=&quot;parent_id1&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String id1;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span> </span><br><span class="line">	<span class="meta">@Column(name=&quot;parent_id2&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String id2;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParentId</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	<span class="comment">//식별자 클래스의 속성명과 엔티티에서 사용하는 식별자의 속성명이 같아야함!! </span></span><br><span class="line">	<span class="keyword">private</span> String id1;</span><br><span class="line">	<span class="keyword">private</span> String id2; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//기본생성자 필수</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ParentId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ParentId</span><span class="params">(String id1, String id2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id1 = id1;</span><br><span class="line">		<span class="keyword">this</span>.id2 = id2; </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//equals &amp; hashcode 는 반드시 구현되어야함.</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;...&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//저장</span></span><br><span class="line">Parent p = <span class="keyword">new</span> Parent();</span><br><span class="line">p.setId1(<span class="string">&quot;id1&quot;</span>);</span><br><span class="line">p.setId2(<span class="string">&quot;id2&quot;</span>);</span><br><span class="line">p.setName(<span class="string">&quot;pName&quot;</span>);</span><br><span class="line">em.persist(p);</span><br><span class="line"></span><br><span class="line"><span class="comment">//조회 </span></span><br><span class="line">ParentId pid = <span class="keyword">new</span> ParentId(<span class="string">&quot;id1&quot;</span>,<span class="string">&quot;id2&quot;</span>);</span><br><span class="line">Parent p = em.find(Parent.class,parentId);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child클래스</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="keyword">private</span> String id; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@ManyToOne</span></span><br><span class="line">	<span class="meta">@JoinColumns(&#123;</span></span><br><span class="line"><span class="meta">		@JoinColumn(name = &quot;parent_id1&quot;, referenceColumnName = &quot;parent_id1&quot;),</span></span><br><span class="line"><span class="meta">		@JoinColumn(name = &quot;parent_id2&quot;, referenceColumnName = &quot;parent_id2&quot;)</span></span><br><span class="line"><span class="meta">	&#125;)</span></span><br><span class="line">	<span class="keyword">private</span> Parent parent; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="EmbeddedId"><a href="#EmbeddedId" class="headerlink" title="EmbeddedId"></a>EmbeddedId</h6><figure class="highlight java"><figcaption><span>복합키 EmbeddedId 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@IdClass(ParentId.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@EmbeddedId</span> </span><br><span class="line">	<span class="keyword">private</span> ParentId id2;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Embeddable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ParentId</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	<span class="comment">//식별자 클래스의 속성명과 엔티티에서 사용하는 식별자의 속성명이 같아야함!! </span></span><br><span class="line">	<span class="meta">@Column(name = &quot;parent_id1&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String id1;</span><br><span class="line">	<span class="meta">@Column(name = &quot;parent_id2&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String id2; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//기본생성자 필수</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ParentId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">ParentId</span><span class="params">(String id1, String id2)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.id1 = id1;</span><br><span class="line">		<span class="keyword">this</span>.id2 = id2; </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">//equals &amp; hashcode 는 반드시 구현되어야함.</span></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;...&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//저장</span></span><br><span class="line">Parent p = <span class="keyword">new</span> Parent();</span><br><span class="line">ParentId pid = <span class="keyword">new</span> ParentId(<span class="string">&quot;id1&quot;</span>,<span class="string">&quot;id2&quot;</span>);</span><br><span class="line">p.setId(pid);</span><br><span class="line">p.setName(<span class="string">&quot;pName&quot;</span>);</span><br><span class="line">em.persist(p);</span><br><span class="line"></span><br><span class="line"><span class="comment">//조회 </span></span><br><span class="line">ParentId pid = <span class="keyword">new</span> ParentId(<span class="string">&quot;id1&quot;</span>,<span class="string">&quot;id2&quot;</span>);</span><br><span class="line">Parent p = em.find(Parent.class,parentId);</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child클래스</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="keyword">private</span> String id; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@ManyToOne</span></span><br><span class="line">	<span class="meta">@JoinColumns(&#123;</span></span><br><span class="line"><span class="meta">		@JoinColumn(name = &quot;parent_id1&quot;, referenceColumnName = &quot;parent_id1&quot;),</span></span><br><span class="line"><span class="meta">		@JoinColumn(name = &quot;parent_id2&quot;, referenceColumnName = &quot;parent_id2&quot;)</span></span><br><span class="line"><span class="meta">	&#125;)</span></span><br><span class="line">	<span class="keyword">private</span> Parent parent; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="3-1-2-복합키-식별-관계-매핑"><a href="#3-1-2-복합키-식별-관계-매핑" class="headerlink" title="3-1-2. 복합키 : 식별 관계 매핑"></a>3-1-2. 복합키 : 식별 관계 매핑</h5><p>복합키 식별관계 매핑은 부모,자식,손자까지 계속 기본 키를 전달하는 식별관계 이다. 식별 관계에서 자식 테이블은 부모 테이블의 기본 키를 포함해서 복합 키를 구성해야 하므로 @IdClass나 @EmbeddedId를 사용해서 식별자를 매핑해야한다. </p>
<h6 id="IdClass-1"><a href="#IdClass-1" class="headerlink" title="@IdClass"></a>@IdClass</h6><figure class="highlight java"><figcaption><span>복합키: 식별관계 매핑 IdClass 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> ParentId id2;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child클래스</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@IdClass(ChildId.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="meta">@ManyToOne</span></span><br><span class="line">	<span class="meta">@JoinColumn(name = &quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Parent parent; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@Column(name = &quot;child_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String childId; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChildId</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String parent; <span class="comment">//Child.parent 매핑</span></span><br><span class="line">	<span class="keyword">private</span> String childId; <span class="comment">//Child.childId 매핑</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//equals,hashcode 재정의 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="meta">@IdClass(GrandChildId.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GrandChild</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="meta">@ManyToOne</span></span><br><span class="line">	<span class="meta">@JoinColumns(&#123;</span></span><br><span class="line"><span class="meta">		@JoinColumn(name = &quot;parent_id&quot;),</span></span><br><span class="line"><span class="meta">		@JoinColumn(name = &quot;child_id&quot;)</span></span><br><span class="line"><span class="meta">	&#125;)</span></span><br><span class="line">	<span class="keyword">private</span> Child child;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@Column(name = &quot;GRANDCHILD_ID&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> String id; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GrandChildId</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> ChildId child; <span class="comment">//GrandChild.child 매핑</span></span><br><span class="line">	<span class="keyword">private</span> String id; <span class="comment">//GrandChild.id 매핑</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//equals,hashcode재정의 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h6 id="EmbeddedId-1"><a href="#EmbeddedId-1" class="headerlink" title="@EmbeddedId"></a>@EmbeddedId</h6><figure class="highlight java"><figcaption><span>복합키: 식별관계 매핑 EmbeddedId 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> ParentId id2;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child클래스</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@IdClass(ChildId.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">	<span class="meta">@EmbeddedId</span></span><br><span class="line">	<span class="keyword">private</span> String childId; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@MapsId(&quot;parentId&quot;)</span></span><br><span class="line">	<span class="meta">@ManyToOne</span></span><br><span class="line">	<span class="meta">@JoinColumn(name = &quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Parent parent; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Embeddable</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChildId</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String parent; <span class="comment">//MapsId(&quot;parentId&quot;) 매핑</span></span><br><span class="line">	<span class="keyword">private</span> String childId; <span class="comment">//Child.childId 매핑</span></span><br><span class="line">	</span><br><span class="line">	<span class="comment">//equals,hashcode 재정의 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GrandChild</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@EmbeddedId</span></span><br><span class="line">	<span class="keyword">private</span> GrandChildId id; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@MapsId(&quot;childId&quot;)</span></span><br><span class="line">	<span class="meta">@ManyToOne</span></span><br><span class="line">	<span class="meta">@JoinColumns(&#123;</span></span><br><span class="line"><span class="meta">		@JoinColumn(name = &quot;parent_id&quot;),</span></span><br><span class="line"><span class="meta">		@JoinColumn(name = &quot;child_id&quot;)</span></span><br><span class="line"><span class="meta">	&#125;)</span></span><br><span class="line">	<span class="keyword">private</span> Child child;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GrandChildId</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> ChildId child; <span class="comment">//MapsId(&quot;childId&quot;) 매핑</span></span><br><span class="line">	<span class="keyword">private</span> String id; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">//equals,hashcode재정의 </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="3-1-3-비식별-관계-매핑-복합키-X"><a href="#3-1-3-비식별-관계-매핑-복합키-X" class="headerlink" title="3-1-3. 비식별 관계 매핑 : 복합키 X"></a>3-1-3. 비식별 관계 매핑 : 복합키 X</h5><figure class="highlight java"><figcaption><span>비식별관계 매핑 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child클래스</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;child_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@ManyToOne</span></span><br><span class="line">	<span class="meta">@JoinColumn(name = &quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Parent parent; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GrandChild</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name =&quot;grandchild_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@ManyToOne</span></span><br><span class="line">	<span class="meta">@JoinColumn(name=&quot;child_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Child child;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="3-1-4-일대일-식별관계"><a href="#3-1-4-일대일-식별관계" class="headerlink" title="3-1-4 일대일 식별관계"></a>3-1-4 일대일 식별관계</h5><figure class="highlight java"><figcaption><span>일대일 식별관계</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Board</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span> </span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String title; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@OneToOne(mappedBy = &quot;borad&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> BoardDetail boardDetail; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BoardDetail</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span></span><br><span class="line">	<span class="keyword">private</span> Long boardId;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@MapsId</span> <span class="comment">//BoardDetail.boardId 매핑 </span></span><br><span class="line">	<span class="meta">@OneToOne</span></span><br><span class="line">	<span class="meta">@JoinColumn(name = &quot;board_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Board board; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">private</span> String content; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//저장 </span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Board board = <span class="keyword">new</span> Board(); </span><br><span class="line">	board.setTitle(<span class="string">&quot;제목&quot;</span>);</span><br><span class="line">	em.persist(board); </span><br><span class="line">	</span><br><span class="line">	BoardDetail boardDetail = <span class="keyword">new</span> BoardDetail();</span><br><span class="line">	boardDetail.setContent(<span class="string">&quot;내용&quot;</span>);</span><br><span class="line">	boardDetail.setBoard(board);</span><br><span class="line">	em.persist(boardDetail); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="4-조인-테이블"><a href="#4-조인-테이블" class="headerlink" title="4. 조인 테이블"></a>4. 조인 테이블</h2><h3 id="4-1-1-1-조인-테이블"><a href="#4-1-1-1-조인-테이블" class="headerlink" title="4-1. 1:1 조인 테이블"></a>4-1. 1:1 조인 테이블</h3><figure class="highlight java"><figcaption><span>1:1 조인테이블 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@OneToOne</span></span><br><span class="line">	<span class="meta">@JoinTable(name = &quot;parent_child&quot;)</span>, </span><br><span class="line">	joinColumns(name = <span class="meta">@JoinColumn(name = &quot;parent_id&quot;)</span>,</span><br><span class="line">	inverseJoinColumns(name=<span class="string">&quot;child_id&quot;</span>))</span><br><span class="line">	<span class="keyword">private</span> Child child; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child클래스</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;child_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">	<span class="comment">/* 양방향 연관관계 매핑 하려면 아래코드작성 </span></span><br><span class="line"><span class="comment">	@OneToOne(mappedBy=&quot;child&quot;)</span></span><br><span class="line"><span class="comment">	private Parent parent; </span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-1-N-조인-테이블"><a href="#4-2-1-N-조인-테이블" class="headerlink" title="4-2. 1:N 조인 테이블"></a>4-2. 1:N 조인 테이블</h3><figure class="highlight java"><figcaption><span>1:N 조인테이블 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@OneToMany</span></span><br><span class="line">	<span class="meta">@JoinTable(name = &quot;parent_child&quot;)</span>, </span><br><span class="line">	joinColumns(name = <span class="meta">@JoinColumn(name = &quot;parent_id&quot;)</span>,</span><br><span class="line">	inverseJoinColumns(name=<span class="string">&quot;child_id&quot;</span>))</span><br><span class="line">	<span class="keyword">private</span> List&lt;Child&gt; child = <span class="keyword">new</span> ArrayList&lt;&gt;(); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child클래스</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;child_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-3-N-1-조인-테이블"><a href="#4-3-N-1-조인-테이블" class="headerlink" title="4-3. N:1 조인 테이블"></a>4-3. N:1 조인 테이블</h3><figure class="highlight java"><figcaption><span>N:1 조인테이블 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@OneToMany(mappedBy = &quot;parent&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> List&lt;Child&gt; child = <span class="keyword">new</span> ArrayList&lt;&gt;(); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child클래스</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;child_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@ManyToOne(optional=false)</span></span><br><span class="line">	<span class="meta">@JoinTable(name = &quot;parent_child&quot;)</span>, </span><br><span class="line">	joinColumns(name = <span class="meta">@JoinColumn(name = &quot;child_id&quot;)</span>,</span><br><span class="line">	inverseJoinColumns(name=<span class="string">&quot;parent_id&quot;</span>))</span><br><span class="line">	<span class="keyword">private</span> Parent parent;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="4-3-N-M-조인-테이블"><a href="#4-3-N-M-조인-테이블" class="headerlink" title="4-3. N:M 조인 테이블"></a>4-3. N:M 조인 테이블</h3><figure class="highlight java"><figcaption><span>N:M 조인테이블 예시</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Parent</span> </span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;parent_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id;</span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">	<span class="meta">@ManyToMany</span></span><br><span class="line">	<span class="meta">@JoinTable(name = &quot;parent_child&quot;)</span>, </span><br><span class="line">	joinColumns(name = <span class="meta">@JoinColumn(name = &quot;parent_id&quot;)</span>,</span><br><span class="line">	inverseJoinColumns(name=<span class="string">&quot;child_id&quot;</span>))</span><br><span class="line">	<span class="keyword">private</span> List&lt;Child&gt; child = <span class="keyword">new</span> ArrayList&lt;&gt;(); </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Child클래스</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Child</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Id</span> <span class="meta">@GeneratedValue</span></span><br><span class="line">	<span class="meta">@Column(name=&quot;child_id&quot;)</span></span><br><span class="line">	<span class="keyword">private</span> Long id; </span><br><span class="line">	<span class="keyword">private</span> String name; </span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/04/19/high-end-mapping/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 codexdawn. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">codexdawn</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-ikbi0v8fyzuu91xv5rmpcrnwb4qinfgborzd5kejmj8wr6ibfra8oaxqshyg.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
