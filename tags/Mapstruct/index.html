
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="codexdawn">
    <title>Tag: Mapstruct - codexdawn</title>
    <meta name="author" content="codexdawn">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="codexdawn">
<meta property="og:url" content="https://codexdawn.github.io/tags/Mapstruct/index.html">
<meta property="og:site_name" content="codexdawn">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="codexdawn">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-3sspfygaapf5d6tbrnqmyrhdcstv0iwwmi4wor2yeip9c44sowy9gbdzyyjm.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            codexdawn
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/codexdawn"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.facebook.com/beherzt.dev"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/in/sim-jisung-3048872a/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:cloudkaiser@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/12/mapstruct-2/"
                            aria-label=": mapstruct-2"
                        >
                            mapstruct-2
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-12T01:27:36+00:00">
	
		    May 12, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Mapstruct/">Mapstruct</a>, <a class="category-link" href="/categories/%EC%9C%A0%EB%A0%88%EC%B9%B4or%EC%82%BD%EC%A7%88/">유레카or삽질</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Mapstruct-삽질기2-활용편-custom-mapping-사용방법"><a href="#Mapstruct-삽질기2-활용편-custom-mapping-사용방법" class="headerlink" title="Mapstruct 삽질기2 : 활용편 (custom mapping 사용방법)"></a>Mapstruct 삽질기2 : 활용편 (custom mapping 사용방법)</h1><h2 id="1-적용했는데-문제-발생-문제가-뭐야"><a href="#1-적용했는데-문제-발생-문제가-뭐야" class="headerlink" title="1. 적용했는데 문제 발생! 문제가 뭐야?"></a>1. 적용했는데 문제 발생! 문제가 뭐야?</h2><p>사건의 발단은 이렇다. 직장동료가 내가 전파한 MapStruct를 가지고 적용을 했는데, lombok을 같이 사용하다보니, isUse라는 Entity에서 useYn으로 변환을 시켜줘야하는 이슈가 있었다. 결국 boolean -&gt; String 으로 변환을 시켜줘야 하는데, 잘 안되었던것이다. 그리고 lombok에서 접두어에 is- 를 붙이면 네이밍이슈가 발생하여서, 이부분도 골칫거리였다. lombok에서 boolean타입일땐.. 가급적 is-접두어 붙이지말자..-_-; 여러가지로 상당히 피곤해짐….</p>
<h2 id="2-해결방법"><a href="#2-해결방법" class="headerlink" title="2. 해결방법"></a>2. 해결방법</h2><p>해결방법은 직장동료분께서 적용한 방식과 내가 적용한 방식 두가지 방식으로 해결할수있었다. </p>
<h3 id="2-1-해결방법1-Named로-정의하기해서-사용하기"><a href="#2-1-해결방법1-Named로-정의하기해서-사용하기" class="headerlink" title="2-1. 해결방법1 : @Named로 정의하기해서 사용하기!"></a>2-1. 해결방법1 : @Named로 정의하기해서 사용하기!</h3><figure class="highlight java"><figcaption><span>named사용방법</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wemakeprice.v.cms.api.utils.mapstruct.app;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.cms.api.dto.app.AppExaminationDto;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.cms.domain.repository.jpa.vcontent.app.entity.AppExaminationEntity;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.cms.domain.utils.mapstruct.GenericMapper;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Mapping;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Named;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper(componentModel=&quot;spring&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AppExaminationMapper</span> <span class="keyword">extends</span> <span class="title">GenericMapper</span>&lt;<span class="title">AppExaminationDto</span>, <span class="title">AppExaminationEntity</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Mapping(source = &quot;use&quot;, target = &quot;useYn&quot;, qualifiedByName = &quot;booleanToYN&quot;)</span></span><br><span class="line">    <span class="function">AppExaminationDto <span class="title">toDto</span><span class="params">(AppExaminationEntity appExaminationEntity)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Named(&quot;booleanToYN&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">default</span> String <span class="title">booleanToYN</span><span class="params">(<span class="keyword">boolean</span> bool)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> bool ? <span class="string">&quot;Y&quot;</span> : <span class="string">&quot;N&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>@Named로 일종의 custom mapper를 만들어서 사용 (qualifiedByName 으로 해당 메서드 주입? 연결 시킴)</li>
<li>interface의 default메서드를 활용해서 구현체에 영향주지 않도록 걸어둠 </li>
<li>isUse로 사용했던 부분은 mapping시 use로 변경해서 매핑 (lombok이슈인듯)</li>
<li>단일 매퍼 적용시 기대효과 괜춘할듯. </li>
</ol>
<h3 id="2-2-해결방법2-uses로-매핑하여-사용하기"><a href="#2-2-해결방법2-uses로-매핑하여-사용하기" class="headerlink" title="2-2. 해결방법2 : uses로 매핑하여 사용하기!"></a>2-2. 해결방법2 : uses로 매핑하여 사용하기!</h3><figure class="highlight java"><figcaption><span>booleanMapper생성</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wemakeprice.v.cms.api.utils.mapstruct.app;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.cms.api.dto.app.AppExaminationDto;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.cms.domain.repository.jpa.vcontent.app.entity.AppExaminationEntity;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.cms.domain.utils.mapstruct.GenericMapper;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Mapping;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Named;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper(uses = BooleanYNMapper.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">AppExaminationMapper</span> <span class="keyword">extends</span> <span class="title">GenericMapper</span>&lt;<span class="title">AppExaminationDto</span>, <span class="title">AppExaminationEntity</span>&gt; </span>&#123;</span><br><span class="line">    <span class="meta">@Mapping(source = &quot;use&quot;, target = &quot;useYn&quot;)</span></span><br><span class="line">    <span class="function">AppExaminationDto <span class="title">toDto</span><span class="params">(AppExaminationEntity appExaminationEntity)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.wemakeprice.v.cms.api.utils.mapstruct.app;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BooleanYNMapper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">asString</span><span class="params">(Boolean use)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span> == use ?</span><br><span class="line">            <span class="keyword">null</span> : (use ?</span><br><span class="line">            <span class="string">&quot;Y&quot;</span> : <span class="string">&quot;N&quot;</span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol>
<li>componentModel=”spring” 제거 (이렇게 걸고 BooleanYNMapper생성하니 nullpointer발생)</li>
<li>uses는 여러개 mapper를 적용할수있다. 따라서 생성된 custom mapper들은 공통 로직으로 활용가능함. (해결방법1은 그 mapper만 적용할때 사용 하면 될듯)</li>
<li>isUse로 사용했던 부분은 mapping시 use로 변경해서 매핑 (lombok이슈인듯)</li>
</ol>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/54610680/mapstruct-mapping-boolean-to-string">참고1. 스택오버플로우 질문</a><br><a target="_blank" rel="noopener" href="https://mapstruct.org/documentation/stable/reference/html/#invoking-other-mappers">참고2. 공식사이트 내용</a></p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/12/mapstruct-2/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/05/10/mapstruct-1/"
                            aria-label=": mapstruct-1"
                        >
                            mapstruct-1
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-05-10T03:18:01+00:00">
	
		    May 10, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Mapstruct/">Mapstruct</a>, <a class="category-link" href="/categories/%EC%9C%A0%EB%A0%88%EC%B9%B4or%EC%82%BD%EC%A7%88/">유레카or삽질</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Mapstruct-삽질기-기본편"><a href="#Mapstruct-삽질기-기본편" class="headerlink" title="Mapstruct 삽질기 : 기본편"></a>Mapstruct 삽질기 : 기본편</h1><h2 id="1-Mapstruct란"><a href="#1-Mapstruct란" class="headerlink" title="1. Mapstruct란?"></a>1. Mapstruct란?</h2><p><a target="_blank" rel="noopener" href="https://mapstruct.org/">Mapstruct 공식사이트</a></p>
<p>MapStruct is a code generator that greatly simplifies the implementation of mappings between Java bean types based on a convention over configuration approach.<br>자바빈즈기반의 객체를 간단한 컨벤션 설정을 통해 매핑시켜주는 역할을 담당한다고 생각하면 됨. 그냥 ModelMapper와 유사한 기능을 한다고 생각하면 됨. (그렇다고 둘이 매커니즘이 같은건 아님. )</p>
<hr>
<h2 id="2-왜-사용함"><a href="#2-왜-사용함" class="headerlink" title="2. 왜 사용함?"></a>2. 왜 사용함?</h2><p>Multi-layered applications often require to map between different object models (e.g. entities and DTOs). Writing such mapping code is a tedious and error-prone task. MapStruct aims at simplifying this work by automating it as much as possible.<br>In contrast to other mapping frameworks MapStruct generates bean mappings at compile-time which ensures a high performance, allows for fast developer feedback and thorough error checking.</p>
<p>Multi-layered (멀티모듈 프로젝트 같은것?)은 다른 객체 모델에 대해서 매핑시켜줘야하는 일들이 많다. 예를들어서 Entity를 DTO로. 기존 노가다성 메핑할떄는 세레머니 코드들이 많이 들어가있고(map,mapToList..) 에러를 유발시킬수있는 코드로 실수할수있는데, MapStruct는 이런 부분을 자동으로 간단스하게 처리 해줌.<br>다른 매핑프레임워크에 비해서 MapStruct는 컴파일 시점에 mapping 코드를 생성하기때문에 성능적으로 안정적인 부분과 컴파일시점에 에러를 잡아낼수있어서, 개발자의 실수를 줄일수있음. (modelmapper는 runtime시점에 mapping하기때문에 생성비용이 꽤나큼 뭐 Bean Scope가 singleton이라 한번 컨테이너 올리면.. 그닥 큰 이슈가 아닐란가싶긴하지만..runtime과 compile시점은 엄청난 차이가 있음. compile시점이 사실 안정적으로 실수나 에러검증을 해주기가 아주 유리함!)</p>
<hr>
<h2 id="3-설정"><a href="#3-설정" class="headerlink" title="3. 설정"></a>3. 설정</h2><h3 id="3-1-build-gradle"><a href="#3-1-build-gradle" class="headerlink" title="3-1. build.gradle"></a>3-1. build.gradle</h3><p>설정위해서는 lombok 의존성을 추가한 root 프로젝트쪽 build.gradle쪽에 추가해줘야함. 중요한 부분은 lombok을 사용하면 의존성 추가할때 위치나 버전에 따라 설정이 달라질수있음. </p>
<figure class="highlight plain"><figcaption><span>root-build.gradle</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line">dependencies &#123;</span><br><span class="line"></span><br><span class="line">        implementation &#39;org.mapstruct:mapstruct:1.4.1.Final&#39;</span><br><span class="line">        compileOnly &#39;org.projectlombok:lombok&#39;</span><br><span class="line">        compile group: &#39;org.projectlombok&#39;, name: &#39;lombok-mapstruct-binding&#39;, version: &#39;0.2.0&#39;</span><br><span class="line">        annotationProcessor &#39;org.springframework.boot:spring-boot-configuration-processor&#39;</span><br><span class="line">        annotationProcessor &#39;org.projectlombok:lombok&#39;</span><br><span class="line">        annotationProcessor &#39;org.mapstruct:mapstruct-processor:1.4.1.Final&#39;</span><br><span class="line"></span><br><span class="line">        testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) &#123;</span><br><span class="line">            exclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; jackson</span><br><span class="line">        implementation(&#39;com.fasterxml.jackson.core:jackson-databind&#39;)</span><br><span class="line">        implementation(&#39;com.google.code.gson:gson:2.8.0&#39;)</span><br><span class="line">        implementation(&#39;com.google.guava:guava:28.0-jre&#39;)</span><br><span class="line">        implementation(&#39;commons-codec:commons-codec&#39;)</span><br><span class="line">        implementation(&#39;org.apache.commons:commons-lang3:3.9&#39;)</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; jsr validation</span><br><span class="line">        implementation(&#39;javax.validation:validation-api:2.0.1.Final&#39;)</span><br><span class="line"></span><br><span class="line">        testCompile group: &#39;junit&#39;, name: &#39;junit&#39;, version: &#39;4.12&#39;</span><br><span class="line">        testImplementation(&#39;org.easytesting:fest-assert:1.4&#39;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-2-GenericMapper"><a href="#3-2-GenericMapper" class="headerlink" title="3-2. GenericMapper"></a>3-2. GenericMapper</h3><p>사실 굳이 안만들어도 되긴하는데, 한벌 만들어놓으면 공통로직으로 사용하기 용이함 </p>
<figure class="highlight java"><figcaption><span>api-GenericMapper</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.wemakeprice.v.ocs.api.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.mapstruct.NullValuePropertyMappingStrategy.IGNORE;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.mapstruct.BeanMapping;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.MappingTarget;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">GenericMapper</span>&lt;<span class="title">D</span>,<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">D <span class="title">toDto</span><span class="params">(E e)</span></span>;</span><br><span class="line">    <span class="function">E <span class="title">toEntity</span><span class="params">(D d)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@BeanMapping(nullValuePropertyMappingStrategy = IGNORE)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">updateFromDto</span><span class="params">(D dto, <span class="meta">@MappingTarget</span> E entity)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="4-사용방법"><a href="#4-사용방법" class="headerlink" title="4. 사용방법"></a>4. 사용방법</h2><p>사용 예시는 mapToList 의 예시이다. 하지만 기존 modelMapper에서 처리하는 부분도 @Mapper내에서 가능한것으로 파악되어짐. </p>
<figure class="highlight java"><figcaption><span>entity to dto 사용방법</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> com.wemakeprice.v.ocs.api.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.api.dto.order.PurchaseInfo;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.domain.repository.escrow.order.Purchase;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.Mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper(componentModel = &quot;spring&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">PurchaseMapper</span> <span class="keyword">extends</span> <span class="title">GenericMapper</span>&lt;<span class="title">PurchaseInfo</span>, <span class="title">Purchase</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function">List&lt;PurchaseInfo&gt; <span class="title">getPurchaseInfo</span><span class="params">(List&lt;Purchase&gt; purchaseEntity)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>실사용소스</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wemakeprice.v.ocs.api.service.purchase;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.api.dto.order.PurchaseInfo;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.api.dto.order.PurchaseRequestParam;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.api.mapper.PurchaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.domain.provider.order.PurchaseProvider;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.domain.utils.ModelMapperUtils;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.meta.order.OrderType;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> lombok.RequiredArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> org.mapstruct.factory.Mappers;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@RequiredArgsConstructor</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PurchaseService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PurchaseProvider purchaseProvider;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> PurchaseMapper purchaseMapper = Mappers.getMapper(PurchaseMapper.class);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;PurchaseInfo&gt; <span class="title">getPurchaseInfo</span><span class="params">(PurchaseRequestParam param)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//return ModelMapperUtils.mapToList(purchaseProvider.findByOrderTypeAndMid(param.getOrderType(),param.getMid()),PurchaseInfo.class);</span></span><br><span class="line">        <span class="keyword">return</span> purchaseMapper.getPurchaseInfo(purchaseProvider.findByOrderTypeAndMid(param.getOrderType(),param.getMid()));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;PurchaseInfo&gt; <span class="title">getPurchaseInfoByOrderType</span><span class="params">(OrderType orderType)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//return ModelMapperUtils.mapToList(purchaseProvider.findByOrderTypeEquals(orderType),PurchaseInfo.class);</span></span><br><span class="line">        <span class="keyword">return</span> purchaseMapper.getPurchaseInfo(purchaseProvider.findByOrderTypeEquals(orderType));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>purchaseInfoImpl</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.wemakeprice.v.ocs.api.mapper;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.api.dto.order.PurchaseInfo;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.domain.repository.escrow.order.Purchase;</span><br><span class="line"><span class="keyword">import</span> com.wemakeprice.v.ocs.meta.order.OrderType;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> javax.annotation.Generated;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"> </span><br><span class="line"><span class="meta">@Generated(</span></span><br><span class="line"><span class="meta">    value = &quot;org.mapstruct.ap.MappingProcessor&quot;,</span></span><br><span class="line"><span class="meta">    date = &quot;2021-05-10T12:03:46+0900&quot;,</span></span><br><span class="line"><span class="meta">    comments = &quot;version: 1.4.1.Final, compiler: IncrementalProcessingEnvironment from gradle-language-java-6.8.3.jar, environment: Java 1.8.0_181 (Oracle Corporation)&quot;</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PurchaseMapperImpl</span> <span class="keyword">implements</span> <span class="title">PurchaseMapper</span> </span>&#123;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> PurchaseInfo <span class="title">toDto</span><span class="params">(Purchase e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( e == <span class="keyword">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        PurchaseInfo purchaseInfo = <span class="keyword">new</span> PurchaseInfo();</span><br><span class="line"> </span><br><span class="line">        purchaseInfo.setPurchaseNo( e.getPurchaseNo() );</span><br><span class="line">        <span class="keyword">if</span> ( e.getOrderType() != <span class="keyword">null</span> ) &#123;</span><br><span class="line">            purchaseInfo.setOrderType( e.getOrderType().name() );</span><br><span class="line">        &#125;</span><br><span class="line">        purchaseInfo.setTotProdPrice( e.getTotProdPrice() );</span><br><span class="line">        purchaseInfo.setTotShipPrice( e.getTotShipPrice() );</span><br><span class="line">        purchaseInfo.setBuyerNm( e.getBuyerNm() );</span><br><span class="line">        purchaseInfo.setBuyerPhone( e.getBuyerPhone() );</span><br><span class="line">        purchaseInfo.setMid( e.getMid() );</span><br><span class="line">        purchaseInfo.setRegDt( e.getRegDt() );</span><br><span class="line">        purchaseInfo.setChgDt( e.getChgDt() );</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> purchaseInfo;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Purchase <span class="title">toEntity</span><span class="params">(PurchaseInfo d)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( d == <span class="keyword">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        Purchase purchase = <span class="keyword">new</span> Purchase();</span><br><span class="line"> </span><br><span class="line">        purchase.setPurchaseNo( d.getPurchaseNo() );</span><br><span class="line">        <span class="keyword">if</span> ( d.getOrderType() != <span class="keyword">null</span> ) &#123;</span><br><span class="line">            purchase.setOrderType( Enum.valueOf( OrderType.class, d.getOrderType() ) );</span><br><span class="line">        &#125;</span><br><span class="line">        purchase.setTotProdPrice( d.getTotProdPrice() );</span><br><span class="line">        purchase.setTotShipPrice( d.getTotShipPrice() );</span><br><span class="line">        purchase.setBuyerNm( d.getBuyerNm() );</span><br><span class="line">        purchase.setBuyerPhone( d.getBuyerPhone() );</span><br><span class="line">        purchase.setMid( d.getMid() );</span><br><span class="line">        purchase.setRegDt( d.getRegDt() );</span><br><span class="line">        purchase.setChgDt( d.getChgDt() );</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> purchase;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">updateFromDto</span><span class="params">(PurchaseInfo dto, Purchase entity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( dto == <span class="keyword">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">if</span> ( dto.getPurchaseNo() != <span class="keyword">null</span> ) &#123;</span><br><span class="line">            entity.setPurchaseNo( dto.getPurchaseNo() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( dto.getOrderType() != <span class="keyword">null</span> ) &#123;</span><br><span class="line">            entity.setOrderType( Enum.valueOf( OrderType.class, dto.getOrderType() ) );</span><br><span class="line">        &#125;</span><br><span class="line">        entity.setTotProdPrice( dto.getTotProdPrice() );</span><br><span class="line">        entity.setTotShipPrice( dto.getTotShipPrice() );</span><br><span class="line">        <span class="keyword">if</span> ( dto.getBuyerNm() != <span class="keyword">null</span> ) &#123;</span><br><span class="line">            entity.setBuyerNm( dto.getBuyerNm() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( dto.getBuyerPhone() != <span class="keyword">null</span> ) &#123;</span><br><span class="line">            entity.setBuyerPhone( dto.getBuyerPhone() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( dto.getMid() != <span class="keyword">null</span> ) &#123;</span><br><span class="line">            entity.setMid( dto.getMid() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( dto.getRegDt() != <span class="keyword">null</span> ) &#123;</span><br><span class="line">            entity.setRegDt( dto.getRegDt() );</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> ( dto.getChgDt() != <span class="keyword">null</span> ) &#123;</span><br><span class="line">            entity.setChgDt( dto.getChgDt() );</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;PurchaseInfo&gt; <span class="title">getPurchaseInfo</span><span class="params">(List&lt;Purchase&gt; purchaseEntity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ( purchaseEntity == <span class="keyword">null</span> ) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        List&lt;PurchaseInfo&gt; list = <span class="keyword">new</span> ArrayList&lt;PurchaseInfo&gt;( purchaseEntity.size() );</span><br><span class="line">        <span class="keyword">for</span> ( Purchase purchase : purchaseEntity ) &#123;</span><br><span class="line">            list.add( toDto( purchase ) );</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="5-참고"><a href="#5-참고" class="headerlink" title="5. 참고"></a>5. 참고</h2><ul>
<li>modelMapper는 runtime시점에 reflection 하기때문에 runtime시에만 발생할수 있는 문제를 야기 시킬수 있음. <ul>
<li>리플렉션으로 메서드 혹은 클래스에 접근할때 찾지 못하는 이슈가 runtime시에만 발생할수 있기때문에 그것에 대한 예외처리가 반드시 필요하다. </li>
<li>getMethod나 getClass 사용시 superclass,superinterface의 메서드를 호출하려 하기때문에 컴파일시에 감지하지 못하는 에러가 발생할수도 있음. (SecurityException발생 -&gt; checkPackageAccess() 전처리 필요)</li>
<li>runtime시점에 변환작업을 수행하기때문에 성능이슈가 발생할수있음. 기존 setter로 하는것이 한번에 세팅된다면, 리플렉션으로 두단계 더 거친뒤에야 세팅하기때문에 대량 처리할때는 비용이 클수가 있음.</li>
<li>이에반헤 mapStruct는 컴파일시점에 코드를 generate 시켜서 해당 부분의 코드 및 파일이 증가하는 이슈가 있지만 runtime시에 발생할수있는 리플렉션 에러는 방지할수있음. </li>
<li>결론은 runtime 시점에 리플렉션으로 처리되는 부분들은 가급적 사용하지 말자. 컴파일 시점에서 체크하는것이 가장 안전함.  </li>
</ul>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.skyer9.pe.kr/wordpress/?p=1596">상구리의 기술 블로그 참고</a><br><a target="_blank" rel="noopener" href="https://www.baeldung.com/mapstruct">baeldung-mapstruct 가이드</a><br><a target="_blank" rel="noopener" href="https://mapstruct.org/documentation/stable/reference/html/">mapstruct공식사이트</a></p>
<hr>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/05/10/mapstruct-1/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
        <li class="pagination-number">page 1 of 1</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2022 codexdawn. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">codexdawn</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-ikbi0v8fyzuu91xv5rmpcrnwb4qinfgborzd5kejmj8wr6ibfra8oaxqshyg.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
