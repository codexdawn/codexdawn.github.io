
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="codexdawn">
    <title>Category: Study - codexdawn</title>
    <meta name="author" content="codexdawn">
    
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="codexdawn">
<meta property="og:url" content="https://codexdawn.github.io/categories/Study/page/2/index.html">
<meta property="og:site_name" content="codexdawn">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="codexdawn">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-3sspfygaapf5d6tbrnqmyrhdcstv0iwwmi4wor2yeip9c44sowy9gbdzyyjm.min.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            codexdawn
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/codexdawn"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.facebook.com/beherzt.dev"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/in/sim-jisung-3048872a/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:cloudkaiser@gmail.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/02/08/clean-code-5/"
                            aria-label=": clean-code-5"
                        >
                            clean-code-5
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-02-08T11:10:39+00:00">
	
		    Feb 08, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Clean-Code/">Clean Code</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%EA%B0%9D%EC%B2%B4%EC%99%80-%EC%9E%90%EB%A3%8C%EA%B5%AC%EC%A1%B0/">객체와 자료구조</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="객체와-자료구조"><a href="#객체와-자료구조" class="headerlink" title="객체와 자료구조"></a>객체와 자료구조</h1><blockquote><p>변수를 비공개로 정의하는 이유가 있다. 남들이 변수에 의존하지 않게 만들고 싶어서다. </p>
</blockquote>

<h2 id="자료-추상화"><a href="#자료-추상화" class="headerlink" title="자료 추상화"></a>자료 추상화</h2><figure class="highlight java"><figcaption><span>6-1. 구체적인 Point클래스</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">double</span> x; </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">double</span> y; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>6-2. 추상적인 Point클래스</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Point</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">getX</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">getY</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">setCartesian</span><span class="params">(<span class="keyword">double</span> x, <span class="keyword">double</span> y)</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">getR</span><span class="params">()</span></span>; </span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">getTheta</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">setPolar</span><span class="params">(<span class="keyword">double</span> r, <span class="keyword">double</span> theta)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="1-6-1-VS-6-2-코드의-승자는"><a href="#1-6-1-VS-6-2-코드의-승자는" class="headerlink" title="1. 6-1 VS 6-2 코드의 승자는?"></a>1. 6-1 VS 6-2 코드의 승자는?</h3><ul>
<li>6-1은 개별적으로 좌표값을 읽고 설정하게 강제함. </li>
<li>6-1은 구현ㅇ르 노출한다. 설사, private으로 변수를 선언해도, 각 값마다 getter/setter 함수를 제공한다면 구현을 외부로 노출하는 셈이다. </li>
<li>6-2는 자료 구조 이상을 표현한다. 클레스 메서드 마다 접근 정책을 강제한다. (무조건 구현하도록)</li>
<li>6-2는 좌표를 읽을 때는 각 값을 개별적으로 읽어야 한다. 하지만 좌표를 설정할 때는 두 값을 한번에 설정해야 한다. </li>
</ul>
<p>위 두코드의 승자는 6-2! 이유는 변수 사이에 함수라는 계층을 넣는다고, 구현이 저절로 감춰지지는 않는다. 구현을 감추려면 추상화가 필수다! 그저 형식에 치우쳐 getter/setter함수로 변수를 다룬다고 클래스가 되는게 아니다. 그보다는 추상 인터페이스를 제공해 사용자가 구현을 모른 채 자료의 핵심을 조작할 수 있어야 진정한 의미의 클래스다! </p>
<figure class="highlight java"><figcaption><span>6-3. 구체적인 Vehicle 클래스</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Vehicle</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">getFuelTankCapacityInGallons</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">getGallonsOfGasoline</span><span class="params">()</span></span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>6-4. 추상적인 Vihicle클래스</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Vihicle</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">double</span> <span class="title">getPercentFuelRemaining</span><span class="params">()</span></span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2-6-3-VS-6-4-코드의-승자는"><a href="#2-6-3-VS-6-4-코드의-승자는" class="headerlink" title="2. 6-3 VS 6-4 코드의 승자는?"></a>2. 6-3 VS 6-4 코드의 승자는?</h3><ul>
<li>6-3은 자동차 연료 상태를 구체적인 숫자 값으로 알려준다. </li>
<li>6-4는 자동차 연료 상태를 백분율이라는 추상적인 개념으로 알려준다. </li>
<li>6-3은 두 함수가 변수값을 읽어 반환할 뿐이라는 사실이 거의 확실함. </li>
<li>6-4는 정보가 어디서 오는지 전혀 드러나지 않는다. </li>
</ul>
<p>위 두 코드의 승자는? 6-4! 그 이유는 자룔르 세세하게 공개하기 보다 추상적인 개념으로 표현하는 편이 더 좋다. 인터페이스나 getter/setter 함수 만으로 추상화가 이뤄지지 않는다. 개발자는 객체가 포함하는 자료를 표현할 가장 좋은ㅇ 방법을 심각하게 고민해야한다! </p>
<h2 id="자료-객체-비대칭"><a href="#자료-객체-비대칭" class="headerlink" title="자료/객체 비대칭"></a>자료/객체 비대칭</h2><figure class="highlight java"><figcaption><span>6-5. 절차적인 도형 (절차지향)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> Point topLeft; </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">double</span> side; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> Point topLeft; </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">double</span> height; </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">double</span> width; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> Point center; </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">double</span> radius; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Geomatry</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">double</span> PI = <span class="number">3.14</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">(Object shape)</span> <span class="keyword">throws</span> NoSuchShapeException </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(shape <span class="keyword">instanceof</span> Square) &#123;</span><br><span class="line">			Square s = (Square) shape; </span><br><span class="line">			<span class="keyword">return</span> s.side * s.side; </span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Rectangle) &#123;</span><br><span class="line">			Rectangle r = (Rectangle) shape; </span><br><span class="line">			<span class="keyword">return</span> r.height * r.width; </span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (shape <span class="keyword">instanceof</span> Circle) &#123;</span><br><span class="line">			Circle c = (Circle) shape; </span><br><span class="line">			<span class="keyword">return</span> PI * c.radius * c.radius; </span><br><span class="line">		&#125; </span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> NoSuchShapeException();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>6-6. 다형적인 도형 (객체지향)</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Square</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Point topLeft; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> side; </span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> side * side; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Point topLeft;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> height; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> width; </span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> height * width; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">implements</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> Point center; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">double</span> radius; </span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">double</span> PI = <span class="number">3.14</span>; </span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">return</span> PI * radius * radius; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">area</span><span class="params">()</span></span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-5-VS-6-6-코드의-승자는"><a href="#6-5-VS-6-6-코드의-승자는" class="headerlink" title="6-5 VS 6-6 코드의 승자는?"></a>6-5 VS 6-6 코드의 승자는?</h3><ul>
<li>6-5는 Geomatry 클래스 내부에 함수를 자유롭게 추가 할수 있다. </li>
<li>6-5는 새 도형이 추가된다면 Geomatry클래스 내부에 있는 함수들을 모두 수정해줘야 할수도 있다. </li>
<li>6-6은 6-5처럼 굳이 Geomatry클래스가 필요없고, 새 도형을 추가해도 기존 함수에 아무런 영향을 주지 않는다. </li>
<li>6-6은 새 함수를 추가하면 모든 도형 클래스에 (Shape 인터페이스에 속한) 새 함수를 강제적으로 넣어줘야함.</li>
</ul>
<p>위 두 코드의 승자는? 결론은 무승부! </p>
<ul>
<li>절차적인 코드는 기존 자료구조를 변경하지 않으면서 새 함수를 추가하기 쉽다. 반면, 객체 지향 코드는 기존 함수를 변경하지 않으면서 새 클래스를 추가하기 쉽다. </li>
<li>절차적인 코드는 새로운 자료 구조를 추가하기 어렵다. 그러려면 모든 함수를 고쳐야한다. 객체 지향 코드는 새로운 함수를 추가하기 어렵다. 그러려면 모든 클래스를 고쳐야한다. </li>
</ul>
<p>다시말해, 객체 지향 코드에서 어려운 변경은 절차적인 코드에서 쉬우며, 절차적인 코드에서 어려운 변경은 객체 지향 코드에서 쉽다!<br>복잡한 시스템을 짜다보면 새로운 함수가 아니라 새로운 자료 타입이 필요한 경우가 생긴다. 이때는 클래스 와 객체 지향 코드에서 쉽다!<br>반면, 새로운 자료 타입이 아니라 새로운 함수가 필요한 경우도 생긴다. 이때는 절차적인 코드와 자료구조가 좀 더 적합함! </p>
<h2 id="디미터-법칙"><a href="#디미터-법칙" class="headerlink" title="디미터 법칙"></a>디미터 법칙</h2><p>디미터 법칙은 자신이 조작하는 객체의 속사정을 몰라야 한다는 법칙이다. 즉, 객체는 자료를 숨기고 함수를 공개한다.<br>디미터 법칙은 “클래스 C의 메서드 f는 다음과 같은 객체의 메서드만 호출해야한다.”</p>
<ul>
<li>클래스 C</li>
<li>f가 생성한 객체 </li>
<li>f 인수로 넘어온 객체 </li>
<li>C 인스턴스 변수에 저장된 객체 </li>
</ul>
<p>디미터 법칙을 해하는 가장 대표적인 예는 메서드 체이닝을 활용하는 부분 (모든 메서드 체이닝이 문제가 아니라는 것이 중요!) 이라 할수있다. </p>
<figure class="highlight java"><figcaption><span>디미터 법칙을 어긴 예</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> String outputDir = ctxt.getOptions().getScratchDir().getAbsolutePath(); </span><br></pre></td></tr></table></figure>

<h3 id="기차-충돌"><a href="#기차-충돌" class="headerlink" title="기차 충돌"></a>기차 충돌</h3><p>위와 같은 코드를 기차 충돌이라고 한다. 위와 같은 코드는 차라리 아래와 같이 나누는편이 좋다. </p>
<figure class="highlight java"><figcaption><span>디미터 법칙을 어긴 예</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Option opts = ctxt.getOptions();</span><br><span class="line">File scrachDir = opts.getScratchDir();</span><br><span class="line"><span class="keyword">final</span> String outputDir = scratchDir.getAbsolutePath(); </span><br></pre></td></tr></table></figure>

<p>위 예제 역시 디미터 법칙을 해하는 요소이긴하다. 왜냐하면 ctxt객체가 Options를 포함하고, Options는 ScratchDir을 포함하고, ScartchDir은 AbsolutePath를 포함한다는 사실을 안다. 즉, 함수하나가 아는 지식이 방대하다. 위 코드를 사용하는 함수는 많은 객체를 탐색할 줄 안다는 말이다.<br>위 두 예제코드를 아래 코드처럼 구현했다면 디미터 법칙이 거론되지 않았을것이다. </p>
<figure class="highlight java"><figcaption><span>디미터 법칙을 어긴 예</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> String outputDir = ctxt.options.scartchDir.absouletePath;  </span><br></pre></td></tr></table></figure>

<p>객체라면 내부 구조를 숨겨야 하므로 확실히 디미터 법칙을 위반한다. 반면, 자료구조라면 당연히 내부 구조를 노출하므로 디미터 법칙이 적용되지 않는다.</p>
<h3 id="잡종구조"><a href="#잡종구조" class="headerlink" title="잡종구조"></a>잡종구조</h3><p>절반은 객체, 절반은 자료구조인 잡종구조는 되도록 피하는것이 좋다. 프로그래머가 함수나 타입을 보호할지 공개할지 확신하지 못해 어중간하게 내놓은 설계에 불과함. </p>
<h3 id="구조체-감추기"><a href="#구조체-감추기" class="headerlink" title="구조체 감추기"></a>구조체 감추기</h3><blockquote><p>객체라면 ‘뭔가를 하라고’ 말해야지 속을 드러내라고 말하면 안된다. </p>
</blockquote>

<h2 id="자료-전달-객체-DTO"><a href="#자료-전달-객체-DTO" class="headerlink" title="자료 전달 객체 (DTO)"></a>자료 전달 객체 (DTO)</h2><ul>
<li>DTO는 공개변수만 있고 함수가 없는 클래스다. </li>
<li>Bean은 private변수를 getter/setter 함수로 조작한다. 일종의 사이비 캡슐화로, 일부 OO순수주의자나 만족시킬뿐 별다른 이익을 제공하지 않는다. </li>
</ul>
<h3 id="활성-레코드"><a href="#활성-레코드" class="headerlink" title="활성 레코드"></a>활성 레코드</h3><ul>
<li>활성 레코드는 DTO의 특수형태다. DTO와 같은 맥락이나, 대개 save나 find와 같은 탐색함수도 제공함. </li>
<li>활성 레코드는 자료구조로 취급해야함. </li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/02/08/clean-code-5/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/27/clean-code-4/"
                            aria-label=": clean-code-4"
                        >
                            clean-code-4
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-27T02:27:07+00:00">
	
		    Jan 27, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Clean-Code/">Clean Code</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%ED%98%95%EC%8B%9D-%EB%A7%9E%EC%B6%94%EA%B8%B0/">형식 맞추기</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="형식-맞추기"><a href="#형식-맞추기" class="headerlink" title="형식 맞추기"></a>형식 맞추기</h1><blockquote><p>프로그래머라면 형식을 깔끔하게 맞춰 코드를 짜야한다. 코드 형식을 맞추기 위한 간단한 규칙을 정하고, 그 규칙을 착실히 따라야한다. 팀으로 일한다면 팀이 합의해 규칙을 정하고, 모두가 그 규칙을 따라야 한다. 필요하다면 규칙을 자동으로 적용하는 도구를 활용한다. </p>
</blockquote>

<h2 id="1-형식을-맞추는-목적"><a href="#1-형식을-맞추는-목적" class="headerlink" title="1. 형식을 맞추는 목적"></a>1. 형식을 맞추는 목적</h2><ul>
<li>원래 코드가 사라질지라도 개발자의 스타일과 규율은 사라지지 않기 때문</li>
</ul>
<h2 id="2-적절한-행-길이를-유지하라"><a href="#2-적절한-행-길이를-유지하라" class="headerlink" title="2. 적절한 행 길이를 유지하라"></a>2. 적절한 행 길이를 유지하라</h2><ul>
<li>커다란 시스템도 코드라인이 500줄을 넘지 않고 200줄 정도 인 파일로 운영되고있음. </li>
<li>일반적으로 큰파일보다 작은 파일이 이해하기 쉽다. </li>
</ul>
<h3 id="2-1-신문기사-처럼-작성하라"><a href="#2-1-신문기사-처럼-작성하라" class="headerlink" title="2-1) 신문기사 처럼 작성하라"></a>2-1) 신문기사 처럼 작성하라</h3><ul>
<li>이름은 간단하면서도 설명이 가능할 정도로 신경 써서 짓는다.(이름만 보고도 올바른 모듈을 살펴보고있는지 아닌지를 판단할 정도로 신경써서 짓는다.)</li>
<li>소스 파일 첫부분은 고차원 개념과 알고리즘을 설명한다. 아래로 내려갈수록 의도를 세세하게 묘사한다. 마지막에는 가장 저차원 함수와 세부 내역이 나온다.</li>
</ul>
<h3 id="2-2-개념은-빈-행으로-분리하라"><a href="#2-2-개념은-빈-행으로-분리하라" class="headerlink" title="2-2) 개념은 빈 행으로 분리하라"></a>2-2) 개념은 빈 행으로 분리하라</h3><ul>
<li>빈 행은 새로운 개념을 시작한다는 시각적 단서다.</li>
</ul>
<h3 id="2-3-세로-밀집도"><a href="#2-3-세로-밀집도" class="headerlink" title="2-3) 세로 밀집도"></a>2-3) 세로 밀집도</h3><ul>
<li>줄바꿈이 개념을 분리한다면, 세로 밀집도는 연관성을 의미한다. (즉, 서로 밀집한 코드 행은 세로로 가까이 놓여야 한다는 뜻)</li>
</ul>
<h3 id="2-4-수직-거리"><a href="#2-4-수직-거리" class="headerlink" title="2-4) 수직 거리"></a>2-4) 수직 거리</h3><h4 id="2-4-1-변수선언"><a href="#2-4-1-변수선언" class="headerlink" title="2-4-1) 변수선언"></a>2-4-1) 변수선언</h4><ul>
<li>변수는 사용하는 위치에 최대한 가까이 선언한다. </li>
</ul>
<h4 id="2-4-2-인스턴스-변수"><a href="#2-4-2-인스턴스-변수" class="headerlink" title="2-4-2) 인스턴스 변수"></a>2-4-2) 인스턴스 변수</h4><ul>
<li>인스턴스 변수는 클래스 맨 처음에 선언 (DTO,VO 혹은 DI받은객체등..)</li>
</ul>
<h4 id="2-4-3-종속-함수"><a href="#2-4-3-종속-함수" class="headerlink" title="2-4-3) 종속 함수"></a>2-4-3) 종속 함수</h4><ul>
<li>한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다. </li>
<li>또한 가능하다면 호출하는 함수를 호출되는 함수보다 먼저 배치한다. </li>
</ul>
<h4 id="2-4-4-개념적-유사성"><a href="#2-4-4-개념적-유사성" class="headerlink" title="2-4-4) 개념적 유사성"></a>2-4-4) 개념적 유사성</h4><ul>
<li>개념적인 친화도가 높은 코드일수록 가까이 배치하도록 한다. </li>
</ul>
<blockquote><p>친화도가 높은 요인은 ? (ex&gt; JUnit 4.3.1 assertTrue,assertFalse override 메서드 구현체들)</p>
<ul>
<li>한 함수가 다른 함수를 호출 할때(메서드 종속성)</li>
<li>변수와 그 변수를 사용하는 메서드 </li>
</ul>
</blockquote>

<h4 id="2-4-5-세로-순서"><a href="#2-4-5-세로-순서" class="headerlink" title="2-4-5) 세로 순서"></a>2-4-5) 세로 순서</h4><ul>
<li>위에서 설명했듯이 함수 종속성(메서드 종속성)에 의해, 호출 되는 함수를 호출하는 함수보다 나중에 배치한다. </li>
</ul>
<h2 id="3-가로-형식-맞추기"><a href="#3-가로-형식-맞추기" class="headerlink" title="3. 가로 형식 맞추기"></a>3. 가로 형식 맞추기</h2><ul>
<li>가급적 한 행에 120자 이내로 행 길이를 제한 하도록 하자. </li>
</ul>
<h3 id="3-1-가로-공백과-밀집도"><a href="#3-1-가로-공백과-밀집도" class="headerlink" title="3-1) 가로 공백과 밀집도"></a>3-1) 가로 공백과 밀집도</h3><ul>
<li>가로로는 공백을 사용해 밀접한개념과 느슨한 개념을 표현함 (ex&gt; b<em>b - 4</em>a*c )</li>
</ul>
<h3 id="3-2-가로-정렬"><a href="#3-2-가로-정렬" class="headerlink" title="3-2) 가로 정렬"></a>3-2) 가로 정렬</h3><ul>
<li>현재 우리가 개발하는 방식 그대로 하면됨. (코딩 컨벤션이 있으면 그 형식에 맞춰서 개발해아함.)</li>
</ul>
<h3 id="3-3-들여쓰기"><a href="#3-3-들여쓰기" class="headerlink" title="3-3) 들여쓰기"></a>3-3) 들여쓰기</h3><ul>
<li>범위(scope) 로 이뤄진 계층을 표현하기 위해 코드 들여쓰기 사용함. </li>
</ul>
<h4 id="3-3-1-들여쓰기-무시하기"><a href="#3-3-1-들여쓰기-무시하기" class="headerlink" title="3-3-1) 들여쓰기 무시하기"></a>3-3-1) 들여쓰기 무시하기</h4><ul>
<li>가끔 If문 같은 경우 간단한 한줄짜리 로직을 개발할때, 들여쓰기를 무시할때가 있는데, 한줄의 로직도 들여쓰기를 다 해주는걸 권장함. </li>
</ul>
<h2 id="4-팀-규칙"><a href="#4-팀-규칙" class="headerlink" title="4. 팀 규칙"></a>4. 팀 규칙</h2><ul>
<li>팀내에 코드컨벤션이 있다면 그 컨벤션 규칙을 따르는것이 맞다. (각자 개발방식으로 가져가면 코드 유지가 어렵다.)</li>
<li><a target="_blank" rel="noopener" href="https://google.github.io/styleguide/javaguide.html">구글 코드컨벤션</a></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/27/clean-code-4/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/26/clean-code-3/"
                            aria-label=": clean-code-3"
                        >
                            clean-code-3
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-26T05:09:06+00:00">
	
		    Jan 26, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Clean-Code/">Clean Code</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%EC%A3%BC%EC%84%9D/">주석</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="주석"><a href="#주석" class="headerlink" title="주석"></a>주석</h1><blockquote><p>주석은 쉰들러 리스트가 아니다. 주석은 ‘순수하게 선하지’ 못하다. 사실상 주석은 기껏해야 필요악이다. </p>
</blockquote>

<h2 id="1-주석은-나쁜-코드를-보완하지-못한다"><a href="#1-주석은-나쁜-코드를-보완하지-못한다" class="headerlink" title="1. 주석은 나쁜 코드를 보완하지 못한다."></a>1. 주석은 나쁜 코드를 보완하지 못한다.</h2><ul>
<li>코드에 주석을 추가하는 이유는 코드 품질이 나쁘기 때문이다. </li>
<li>표현력이 풍부하고 깔끔하며(2장,3장을 잘 준수한) 주석이 없는 코드는, 복잡하고 어수선하며 주석이 많이 달린 코듭모다 훨씬 좋다.</li>
</ul>
<h2 id="2-코드로-의도를-표현하라"><a href="#2-코드로-의도를-표현하라" class="headerlink" title="2. 코드로 의도를 표현하라!"></a>2. 코드로 의도를 표현하라!</h2><p>2장.의도있는이름 과 3장.함수를 이어가는 맥락임. </p>
<figure class="highlight java"><figcaption><span>나쁜예</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//직원에게 복지 혜택을 받을 자격이 있는지 검사한다. </span></span><br><span class="line"><span class="keyword">if</span>((employee.flags &amp; HOURLY_FLAG) &amp;&amp; (employee.age &gt; <span class="number">65</span>))</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>개선예</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//직원에게 복지 혜택을 받을 자격이 있는지 검사한다. </span></span><br><span class="line"><span class="keyword">if</span>(employee.isEligibleForFullBenefits())</span><br></pre></td></tr></table></figure>

<h2 id="3-좋은-주석"><a href="#3-좋은-주석" class="headerlink" title="3. 좋은 주석"></a>3. 좋은 주석</h2><h3 id="3-1-법적인-주석"><a href="#3-1-법적인-주석" class="headerlink" title="3-1) 법적인 주석"></a>3-1) 법적인 주석</h3><p>소위 Copyright, GNU같은 오픈소스 라이선스 관련 부분을 헤더에 추가하는 부분을 말한다. </p>
<h3 id="3-2-정보를-제공하는-주석"><a href="#3-2-정보를-제공하는-주석" class="headerlink" title="3-2) 정보를 제공하는 주석"></a>3-2) 정보를 제공하는 주석</h3><figure class="highlight java"><figcaption><span>정보제공좋은예</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//테스트중인 Responder 인스턴스를 반환한다. </span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> Responder <span class="title">responderInstance</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>

<p>위와같이 정보를 제공하는 주석은 달아주는편이 좋긴하나, 가급적 함수이름에 정보를 담는편이 더 좋다. responderBeingTested로 바꾸면 주석이 필요 없어진다.</p>
<h3 id="3-3-의도를-설명하는-주석"><a href="#3-3-의도를-설명하는-주석" class="headerlink" title="3-3) 의도를 설명하는 주석"></a>3-3) 의도를 설명하는 주석</h3><ul>
<li>분명한 의도를 가진 코드에 한해서만 설명하는 주석을 다는것에 초점. (의도만 명확하게 드러나도록만 주석처리 할 것)</li>
<li>의도된 소스가 만약에 소스 수정이 되었으면 그 내용이 변경됨에 따라 주석변경을 반드시 해야할 것.</li>
</ul>
<h3 id="3-4-의미를-명확하게-밝히는-주석"><a href="#3-4-의미를-명확하게-밝히는-주석" class="headerlink" title="3-4) 의미를 명확하게 밝히는 주석"></a>3-4) 의미를 명확하게 밝히는 주석</h3><figure class="highlight java"><figcaption><span>정보제공좋은예</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">assertTrue(a.compareTo(a) == <span class="number">0</span>) <span class="comment">// a == a</span></span><br><span class="line">assertTrue(a.compareTo(b) != <span class="number">0</span>) <span class="comment">// a != b </span></span><br><span class="line">assertTrue(a.compareTo(b) == -<span class="number">1</span>) <span class="comment">// a &lt; b </span></span><br><span class="line">assertTrue(b.compareTo(a) == <span class="number">1</span>) <span class="comment">// b &gt; a</span></span><br></pre></td></tr></table></figure>

<ul>
<li>주석이 올바른지 검증하기 쉽지는 않다. (팩트만 달아두도록 해야하는데..)</li>
<li>가급적 100% 확인이 불가능하다 싶으면 주석을 빼는 방향을 고려해야함. (잘못된 정보를 제공해 혼란주기 딱좋은 예시)</li>
</ul>
<h3 id="3-5-결과를-경고하는-주석"><a href="#3-5-결과를-경고하는-주석" class="headerlink" title="3-5) 결과를 경고하는 주석"></a>3-5) 결과를 경고하는 주석</h3><ul>
<li>실행하면 오래걸려서 손해를 보거나 실행해서 위험할때 주의를 주는 케이스라면 주석을 달아두는것도 좋다. </li>
<li>예시에 <code>SimpleDateFormat 이 스레드에 안전하지 못하다</code> 라고 주석을 달아놔서 주의를 줬지만, 가장 좋은 해결책은 문제를 알았으면 제거하거나 수정하는게 가장 좋다. 나쁜코드를 남기는건 risk다. </li>
</ul>
<h3 id="3-6-TODO-주석"><a href="#3-6-TODO-주석" class="headerlink" title="3-6) TODO 주석"></a>3-6) TODO 주석</h3><ul>
<li>TODO주석은 당장 구현하기 어려운 업무를 기술할 때 사용한다. </li>
<li>TODO주석은 더이상 필요없거나, 기능삭제, 누군가에게 문제를 봐달라는 요청, 부탁등에 유용하다.</li>
<li>하지만 위 조건이 유효하지않을때는 TODO를 남겨놓지 말고, 제거하자. </li>
</ul>
<h3 id="3-7-중요성을-강조하는-주석"><a href="#3-7-중요성을-강조하는-주석" class="headerlink" title="3-7) 중요성을 강조하는 주석"></a>3-7) 중요성을 강조하는 주석</h3><ul>
<li>자칫 대수롭지 않다고 여겨질 뭔가의 중요성을 강조하기 위해서도 주석을 사용함</li>
</ul>
<h3 id="3-8-공개-API에서-JavaDocs"><a href="#3-8-공개-API에서-JavaDocs" class="headerlink" title="3-8) 공개 API에서 JavaDocs"></a>3-8) 공개 API에서 JavaDocs</h3><ul>
<li>설명이 잘 된 공개 API에서는 JavaDocs는 정말 유용하고 만족스럽다. </li>
<li>하지만 그릇된 정보를 전달하지 않도록 주의해야함. </li>
</ul>
<h2 id="4-나쁜-주석"><a href="#4-나쁜-주석" class="headerlink" title="4. 나쁜 주석"></a>4. 나쁜 주석</h2><h3 id="4-1-주절-거리는-주석"><a href="#4-1-주절-거리는-주석" class="headerlink" title="4-1) 주절 거리는 주석"></a>4-1) 주절 거리는 주석</h3><ul>
<li>작성자에게만 의미가 있는 주석은 아무 의미가 없다. (모두에게 의미가 전달되어야 의미가 있는 주석인데, 혼자만 아는 주석은 다른 동료개발자들과 불통한다는 증거)</li>
</ul>
<h3 id="4-2-같은-이야기를-중복하는-주석"><a href="#4-2-같은-이야기를-중복하는-주석" class="headerlink" title="4-2) 같은 이야기를 중복하는 주석"></a>4-2) 같은 이야기를 중복하는 주석</h3><ul>
<li>헤더에 달아놓은 주석과 같은 코드내용을 적는건 시간낭비 다. 주석의 의미를 알아가는데 오히려 시간을 더 투자해야 할 수 있다.</li>
</ul>
<h3 id="4-3-오해할-여지가-있는-주석"><a href="#4-3-오해할-여지가-있는-주석" class="headerlink" title="4-3) 오해할 여지가 있는 주석"></a>4-3) 오해할 여지가 있는 주석</h3><ul>
<li>코드보다 읽기 어려운 주석에 담긴 ‘살짝 잘못된 정보’는 다른 개발자가 그 주석을 참고하고 개발하는데 많은 시간을 투자하게 만들수도있다. </li>
</ul>
<h3 id="4-4-의무적으로-다하는-주석"><a href="#4-4-의무적으로-다하는-주석" class="headerlink" title="4-4) 의무적으로 다하는 주석"></a>4-4) 의무적으로 다하는 주석</h3><ul>
<li>모든 메서드에 JavaDocs를 달거나 모든 변수에 주석을 달아야 한다는 규칙은 어리석은 결정이다.<br>(참고&gt; IntelliJ IDE는 JavaDocs의 잘못된 변수가 오기입되는걸 방지해 주긴한다.)</li>
</ul>
<h3 id="4-5-이력을-기록하는-주석"><a href="#4-5-이력을-기록하는-주석" class="headerlink" title="4-5) 이력을 기록하는 주석"></a>4-5) 이력을 기록하는 주석</h3><ul>
<li>주석에 코드변경 history 남기면 코드적으로 공해가 따로 없다. (그냥 github코드 비교를 보는게 나을듯.)</li>
</ul>
<h3 id="4-6-있으나-마나한-주석"><a href="#4-6-있으나-마나한-주석" class="headerlink" title="4-6) 있으나 마나한 주석"></a>4-6) 있으나 마나한 주석</h3><ul>
<li>너무 당연한 사실을 주석으로 다는건 코드적으로 공해다. </li>
</ul>
<h3 id="4-7-무서운-잡음"><a href="#4-7-무서운-잡음" class="headerlink" title="4-7) 무서운 잡음"></a>4-7) 무서운 잡음</h3><ul>
<li>복사 붙여넣기 잘못해서 잘못기입한 주석은 타개발자에게 불편하게 만드는 요소가된다.</li>
</ul>
<h3 id="4-8-함수나-변수로-표현할수-있다면-주석을-달지-마라"><a href="#4-8-함수나-변수로-표현할수-있다면-주석을-달지-마라" class="headerlink" title="4-8) 함수나 변수로 표현할수 있다면 주석을 달지 마라."></a>4-8) 함수나 변수로 표현할수 있다면 주석을 달지 마라.</h3><ul>
<li>주석은 가급적 없는것이 더 좋기때문에 가급적 변수나 함수 이름에 개발자가 알도록 네이밍을 잘 하자.</li>
</ul>
<h3 id="4-9-위치를-표시하는-주석-닫는-괄호에-다는-주석-공로를-돌리거나-저자를-표시하는-쭈석"><a href="#4-9-위치를-표시하는-주석-닫는-괄호에-다는-주석-공로를-돌리거나-저자를-표시하는-쭈석" class="headerlink" title="4-9) 위치를 표시하는 주석 , 닫는 괄호에 다는 주석 , 공로를 돌리거나 저자를 표시하는 쭈석"></a>4-9) 위치를 표시하는 주석 , 닫는 괄호에 다는 주석 , 공로를 돌리거나 저자를 표시하는 쭈석</h3><ul>
<li>가끔 코드가 수행되는 위치나, while,for문에 닫는 중괄호에 닫는 표시를 하는 주석을 볼수있는데, 그부분은 좋은 주석이 아니다.</li>
<li>쓸데없이 누가 개발했는지 주석으로 명시하는건 코드 공해다. (몰라도되는 정보이며,요즘은 IDE로 금방 히스토리 알수있음.) </li>
</ul>
<h3 id="4-10-주석으로-처리한-코드"><a href="#4-10-주석으로-처리한-코드" class="headerlink" title="4-10) 주석으로 처리한 코드"></a>4-10) 주석으로 처리한 코드</h3><ul>
<li>가끔 다음에 다시 코드를 재사용 해야 하거나, 임시로 잠시 주석을 달아놓는 경우가 있는데, 주석된 코드가 오랫동안 사용되지 않을것 같으면, 제거하자. </li>
<li>github이나 소스관리시스템에서 다 저장하고있으니, 일단 지우고 소스 히스토리보면서 개선하는 방향으로 하자. </li>
</ul>
<h3 id="4-11-HTML주석"><a href="#4-11-HTML주석" class="headerlink" title="4-11) HTML주석"></a>4-11) HTML주석</h3><ul>
<li>html주석은 IDE에서 조차 읽기 어렵다. </li>
<li>html주석은 웹페이지에 올릴 목적으로 사용하는 주석이므로, html삽입하는 주체는 프로그래머가 아니라 html 주석 tool이 되어야한다. </li>
</ul>
<h3 id="4-12-전역-정보"><a href="#4-12-전역-정보" class="headerlink" title="4-12) 전역 정보"></a>4-12) 전역 정보</h3><ul>
<li>주석을 달아야한다면, 근처에 있는 코드만 기술하라. 전역정보의 주석은 기술하지마라. </li>
</ul>
<h3 id="4-13-너무-많은-정보"><a href="#4-13-너무-많은-정보" class="headerlink" title="4-13) 너무 많은 정보"></a>4-13) 너무 많은 정보</h3><ul>
<li>TMI는 그냥 읽기도 불편한 쓰레기 정보다. 간단 명료 하게 핵심만 전달하자. </li>
</ul>
<h3 id="4-14-모호한-관계-주석-과-코드-와의-일맥상통"><a href="#4-14-모호한-관계-주석-과-코드-와의-일맥상통" class="headerlink" title="4-14) 모호한 관계 (주석 과 코드 와의 일맥상통)"></a>4-14) 모호한 관계 (주석 과 코드 와의 일맥상통)</h3><ul>
<li>주석과 주석이 설명하는 코드의 관계는 명백해야 한다. 이왕 공들여 주석을 달았으면, 독자가 주석과 코드를 읽어보고 무슨 소린지 알아야하지 않겠는가? </li>
</ul>
<h3 id="4-15-함수-헤더"><a href="#4-15-함수-헤더" class="headerlink" title="4-15) 함수 헤더"></a>4-15) 함수 헤더</h3><ul>
<li>짧은 함수는 긴 설명이 필요없다. 짧고 한가지만 수행하며 이름을 잘 붙인 함수가 주석으로 헤더를 추가한 함수보다 훨씬 좋다. </li>
</ul>
<h3 id="4-16-비공개-모드에서-JavaDocs"><a href="#4-16-비공개-모드에서-JavaDocs" class="headerlink" title="4-16) 비공개 모드에서 JavaDocs"></a>4-16) 비공개 모드에서 JavaDocs</h3><ul>
<li>접근제한자가 private메서드인 경우 굳이 JavaDocs를 할 필요는 없다. (코드 공해)</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/26/clean-code-3/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/22/java-effective-5/"
                            aria-label=": java-effective-5"
                        >
                            java-effective-5
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-22T01:14:26+00:00">
	
		    Jan 22, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Effective-Java/">Effective Java</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1%EA%B3%BC-%ED%8C%8C%EA%B4%B4/">객체 생성과 파괴</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <blockquote><p>많은 클래스가 하나 이상의 자원에 의존한다. </p>
</blockquote>

<h2 id="아이템5-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라"><a href="#아이템5-자원을-직접-명시하지-말고-의존-객체-주입을-사용하라" class="headerlink" title="아이템5. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라"></a>아이템5. 자원을 직접 명시하지 말고 의존 객체 주입을 사용하라</h2><figure class="highlight java"><figcaption><span>정적 유틸리티를 잘못 만든 예 - 유연하지 않고 테스트하기 어렵다.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpellChecker</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Lexicon dictionary = ...; </span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">SpellChecker</span><span class="params">()</span> </span>&#123;&#125; <span class="comment">//객체생성방지 </span></span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String word)</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;String&gt; <span class="title">suggestions</span><span class="params">(String typo)</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>싱글턴을 잘못 만든 예 - 유연하지 않고 테스트하기 어렵다.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpellChecker</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Lexicon dictionary = ... ;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">SpellChecker</span><span class="params">(...)</span> </span>&#123;&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> SpellChecker INSTANCE = <span class="keyword">new</span> SpellChecker(...) &#123;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String word)</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">suggestions</span><span class="params">(String typo)</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>두 방식 모두 사전을 단 하나만 사용한다고 가정한다는 점에서 그리 훌륭해 보이지 않는다. (용도에 따라서 다양한 사전을 구현할수 있기때문)<br>사용하는 자원에 따라 동작이 달라지는 클래스에는 정적 유틸리티 클래스나 싱글턴 방식이 적합하지 않다.<br>대신, 클래스가 여러 자원 인스턴스를 지원해야 하며, 클라이언트가 원하는 자원을 사용해야한다. 이 조건을 만족하는 간단한 패턴이 있으니,<br>바로 인스턴스를 생성할 때 생성자에 필오한 자원을 넘겨주는 방식이다. (생성자 DI 방식)</p>
<figure class="highlight java"><figcaption><span>DI는 유연성과 테스트 용이성을 높여준다.</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpellChecker</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Lexicon dictionary;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="title">SpellChecker</span><span class="params">(Lexicon dictionary)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">this</span>.dictionary = Objects.requireNonNull(dictionary); </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isValid</span><span class="params">(String word)</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> List&lt;String&gt; <span class="title">suggestions</span><span class="params">(String typo)</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>DI를 사용하면, 딱 하나의 자원 (dictionary) 만 사용하지만, 자원이 몇 개든 의존 관계가 어떻든 잘 동작함. 또한 불변을 보장하여 (같은 자원을 사용하려는) 여러 클라이언트가 의존 객체들을 안심하고 공유할 수 있기도 하다.<br>의존객체주입은 생성자, 정적 팩터리, 빌더 모두에 똑같이 응용 할 수 있다.<br>이 패턴의 쓸만한 변형으로, 생성자에 자원 팩터리를 넘겨주는 방식이 있다.</p>
<blockquote><p>펙터리란? </p>
<ul>
<li>호출 할때 마다 특정 타입의 인스턴스를 반복해서 만들어주는 객체 </li>
</ul>
</blockquote>

<p>즉, 팩터리 메서드 패턴을 구현 한 것이다. 자바8에서 소개한 Supplier<T> 인터페이스가 팩터리를 표현한 완벽한 예다.<br>Supplier<T> 를 입력으로 받는 메서드는 일반적으로 한정적 와일드카드 타입을 사용해 팩터리의 타입 매개변수를 제한해야한다. 이 방식을 사용해 클라이언트는 자신이 명시한 타입의 하위 타입이라면 무엇이든 생성할 수 있는 팩터리를 넘길수 있다. </p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/22/java-effective-5/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/21/clean-code-2/"
                            aria-label=": clean-code-2"
                        >
                            clean-code-2
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-21T07:25:42+00:00">
	
		    Jan 21, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Clean-Code/">Clean Code</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%ED%95%A8%EC%88%98/">함수</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="함수"><a href="#함수" class="headerlink" title="함수"></a>함수</h1><h2 id="1-작게-만들어라"><a href="#1-작게-만들어라" class="headerlink" title="1.작게 만들어라!"></a>1.작게 만들어라!</h2><ul>
<li>함수를 만드는 첫번째 규칙은 <strong>작게</strong> 다. </li>
<li>함수를 만드는 둘째 규칙은 <strong>더작게</strong> 다. </li>
<li>켄트 벡 아저씨 기준으로 모든 함수가 2~4줄 정도가 작게만드는 기준이다.  </li>
</ul>
<h3 id="1-1-블록과-들여쓰기"><a href="#1-1-블록과-들여쓰기" class="headerlink" title="1-1) 블록과 들여쓰기"></a>1-1) 블록과 들여쓰기</h3><ul>
<li>if/else/while 문 등에 들어가는 블록은 한 줄이어야 한다. 대개 거기서 함수를 호출한다. 그러면 바깥을 감싸는 함수가 작아질 뿐아니라, 블록안에서 호출하는 함수 이름을 적절히 짓는다면, 코드를 이해하기도 쉬워진다. 이 말은 중첩 구조가 생길 만큼 함수가 커져서는 안 된다는 뜻이다. 그러므로 함수에서 들여쓰기 수준은 1단이나 2단을 넘어서는 안된다. </li>
<li><a target="_blank" rel="noopener" href="https://www.sonarsource.com/docs/CognitiveComplexity.pdf">Cognitive Complexity 이슈 체크 하기</a></li>
</ul>
<h2 id="2-한-가지만-해라"><a href="#2-한-가지만-해라" class="headerlink" title="2. 한 가지만 해라!"></a>2. 한 가지만 해라!</h2><blockquote><p>함수는 한 가지를 해야한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다. </p>
</blockquote>


<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">renderPageWithSetupsAndTeardowns</span><span class="params">(PageData pageData, <span class="keyword">boolean</span> isSuite)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (isTestPage(pageData))</span><br><span class="line">		incloudeSetupAndTeardownPages(pageData, isSuite);</span><br><span class="line">	<span class="keyword">return</span> pageData.getHtml();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 코드는 한 가지만 하는가? 디테일 하게 보면 세 가지를 한다고 주장 할 수도 있다.</p>
<ul>
<li>페이지가 테스트 페이지인지 판단한다. </li>
<li>그렇다면 섦정 페이지와 해제 페이지를 넣는다. </li>
<li>페이지를 HTML로 렌더링한다.</li>
</ul>
<p>과연 한가지인가 세가지인가? 위에서 언급하는 세 단계는 지정된 함수 이름아래에서 추상화 수준이 <strong>하나</strong> 다. 지정된 함수 이름아래에서 추상화 수준이 하나인 단계만 수행한다면 그 함수는 한 가지 작업만 한다.<br>따라서, 함수가 한가지만 하는지 판단하는 방법은 하나 더 있는데, 단순히 다른 표현이 아니라 의미 있는 이름으로 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 셈이다. </p>
<h2 id="3-함수-당-추상화-수준은-하나로"><a href="#3-함수-당-추상화-수준은-하나로" class="headerlink" title="3. 함수 당 추상화 수준은 하나로!"></a>3. 함수 당 추상화 수준은 하나로!</h2><ul>
<li>한 함수내에 추상화 수준을 섞으면 코드를 읽는 사람이 헷갈린다. 특정 표현이 근본 개념인지 아니면 세부사항인지 구분하기 어려운탓이다. 하지만 문제는 여기서 그치지않고, 근본 개념과 세부사항을 뒤섞기 시작하면, 깨어진 창문처럼 사람들이 함수에 세부사항을 점점 더 추가한다. </li>
</ul>
<h3 id="3-1-위에서-아래로-코드-읽기-내려가기-규칙"><a href="#3-1-위에서-아래로-코드-읽기-내려가기-규칙" class="headerlink" title="3-1) 위에서 아래로 코드 읽기 : 내려가기 규칙"></a>3-1) 위에서 아래로 코드 읽기 : 내려가기 규칙</h3><ul>
<li>코드는 위에서 아래로 이야기 처럼 읽혀야 좋다. </li>
<li>한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 온다. 즉, 위에서 아래로 프로그램을 읽으면 함수 추상화 수준이 한 번에 한 단계씩 낮아진다. 이것을 <strong>내려가기 규칙</strong> 이라고 한다. </li>
</ul>
<p>결국 저자가 말하는 내려가기 규칙 역시 <strong>한 가지</strong> 만 하는 함수를 구현하기 위한 방법이라서 제안하고 있는 부분이다.<br>내려가기 규칙을 잘 활용하면 각 함수는 다음 함수를 소개한다.(종속 함수) 따라서 각 함수는 일정한 추상화 수준을 유지한다. (3-7 코드를 확인해보자!)</p>
<h2 id="4-Switch-문"><a href="#4-Switch-문" class="headerlink" title="4. Switch 문"></a>4. Switch 문</h2><p>switch문은 작게 만들기 어렵다. 원론적으로 switch 문자체는 N가지 처리를 하는 분기문이기 때문이다. 아래 스위치 문을 확인해보자. </p>
<figure class="highlight java"><figcaption><span>switch문 나쁜예</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Money <span class="title">calculatePay</span><span class="params">(Employee e)</span> <span class="keyword">throws</span> InvaliEmployeeType </span>&#123;</span><br><span class="line">	<span class="keyword">switch</span>(e.type) &#123;</span><br><span class="line">		<span class="keyword">case</span> COMMITIONED:</span><br><span class="line">		  <span class="keyword">return</span> calculrateCommitionedPay(e); </span><br><span class="line">		<span class="keyword">case</span> HOULY: </span><br><span class="line">		  <span class="keyword">return</span> calculrateHoulyPay(e); </span><br><span class="line">		<span class="keyword">case</span> SALARIED: </span><br><span class="line">		  <span class="keyword">return</span> calculateSalariedPay(e);</span><br><span class="line">		<span class="keyword">default</span>:</span><br><span class="line">		  <span class="keyword">throw</span> <span class="keyword">new</span> InvalidEmployeeType(e.type); </span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<p>위 함수는 몇가지 문제가 있다.</p>
<ul>
<li>함수가 길다. 새직원 유형을 추가하면 더 길어짐. </li>
<li>‘한가지’ 작업만 수행하지 않는다. </li>
<li>SRP(Single Responseibliity Prinsiple) - 단일책임의원칙을 위반함 코드를 변경할 이유가 여럿 있기때문에</li>
<li>OCP(Open Closed Prinsiple) - 개방폐쇄원칙 위반함. 새 직원 유형을 추가할때마다 코드를 변경해줘야 하기때문 </li>
</ul>
<blockquote><p>OOP에서 SOLID? (<a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/SOLID_(%EA%B0%9D%EC%B2%B4_%EC%A7%80%ED%96%A5_%EC%84%A4%EA%B3%84)">SOLID Wiki 참고</a>)<br>S : SRP(Single Responsibility Principle) : 한 클래스는 하나의 책임만 가져아 한다.<br>O : OCP(Open/Closed Principle) : 소프트웨어 요소는 확장에는 열려 있으나, 변경에는 닫혀 있어야 한다.<br>L : LSP(Liskov Substitution Principle) : 프로그램의 객체는 프로그램의 정확성을 깨뜨리지 않으면서 하위 타입의 인스턴스로 바꿀 수 있어야 한다.<br>I : ISP(Interface Segregation Principle) : 특정 클라이언트를 위한 인터페이스 여러개가 범용 인터페이스 하나보다 낫다.<br>D : DIP(Dependency Inversion Principle) : 프로그래머는 추상화에 의존해야지, 구체화에 의존하면 안된다. (의존성 주입은 이 원칙을 따름)</p>
</blockquote>

<p>그렇다면 위 switch문은 어떻게 개선 할 수 있을까? 아래 코드를 보자 </p>
<figure class="highlight java"><figcaption><span>switch 개선코드</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Employee</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">boolean</span> <span class="title">isPayday</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Money <span class="title">calculatePay</span><span class="params">()</span></span>;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">deliveryPay</span><span class="params">(Money pay)</span></span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EmployeeFactory</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> Employee <span class="title">makeEmployee</span><span class="params">(EmployeeRecord r)</span> <span class="keyword">throws</span> InvalidEmployeeType</span>; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeFactoryImpl</span> <span class="keyword">implements</span> <span class="title">EmployeeFactory</span> </span>&#123; </span><br><span class="line">	<span class="function"><span class="keyword">public</span> Employee <span class="title">makeEmployee</span><span class="params">(EmployeeRecord r)</span> <span class="keyword">throws</span> InvaliEmployeeType </span>&#123;</span><br><span class="line">		<span class="keyword">switch</span>(r.type) &#123;</span><br><span class="line">			<span class="keyword">case</span> COMMITIONED:</span><br><span class="line">			  <span class="keyword">return</span> <span class="keyword">new</span> CommissionedEmployee(r);</span><br><span class="line">			<span class="keyword">case</span> HOULY: </span><br><span class="line">			  <span class="keyword">return</span> <span class="keyword">new</span> HourlyEmployee(r);</span><br><span class="line">			<span class="keyword">case</span> SALARIED: </span><br><span class="line">			  <span class="keyword">return</span> <span class="keyword">new</span> SalariedEmployee(r); </span><br><span class="line">			<span class="keyword">default</span>:</span><br><span class="line">			  <span class="keyword">throw</span> <span class="keyword">new</span> InvalidEmployeeType(e.type); </span><br><span class="line">		&#125;</span><br><span class="line">	&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>개선된 코드에서 확인 가능하듯, 추상 클래스에 switch문을 숨겨놨다. 팩토리는 switch문을 통해 적절한 Employee 파생 클래스의 인스턴스를 생성한다.<br>calculratePay, isPayday, deliveryPay등 과 같은 함수는 Employee 인터페이스를 거쳐 호출 된다. 그러면 다형성으로 인해 실제 파생 클래스의 함수가 실행된다. </p>
<h2 id="5-서술적인-이름을-사용하라"><a href="#5-서술적인-이름을-사용하라" class="headerlink" title="5. 서술적인 이름을 사용하라."></a>5. 서술적인 이름을 사용하라.</h2><ul>
<li>이름이 길어져도 좋다. 시간이 걸려도 길고 서술적인 이름이 짧고 어려운 이름 보다 낫다. </li>
<li>길고 서술적인 이름이 길고 서술적인 주석보다 낫다! 함수이름을 정할때는 여러 단어가 쉽게 읽히는 명명법을 사용한다. 그런 다음, 여러 단어를 사용해 함수 기능을 잘 표현하는 이름을 선택한다. </li>
</ul>
<h2 id="6-함수-인수"><a href="#6-함수-인수" class="headerlink" title="6. 함수 인수"></a>6. 함수 인수</h2><p>함수에서 이상적인 인수 개수는 0개 곧 무항이다. 그 다음은 1개 , 그 다음은 2개, 3개는 가능한 피하는 편이 좋고, 4개 이상은 특별한 이유가 필요하다. 특별한 이유가 있어도 사용하면 안된다. </p>
<h3 id="6-1-많이-쓰는-단항"><a href="#6-1-많이-쓰는-단항" class="headerlink" title="6-1) 많이 쓰는 단항"></a>6-1) 많이 쓰는 단항</h3><p>함수에 인수를 1개 넘기는 이유는 2가지가 있다. </p>
<ul>
<li>인수에 질문을 던지는 경우 </li>
<li>인수를 뭔가 변환해서 반환하는 경우 </li>
</ul>
<p>위 두가지가 아니면 단항 함수는 가급적 피하도록 하자. 예를들어서 <code>void includeSetupPageInto(StringBuffer pageText)</code> 는 피한다. 변환 함수에서 출력 인수를 사용하면 혼란을 일으킨다.<br>입력 인수를 변환하는 함수라면 변환해서 결과는 반환값으로 돌려주도록 하자. (ex- StringBuffer transform(StringBuffer in) 이 void transform(StringBuffer in)보다 좋다.) </p>
<h3 id="6-2-플래그-인수"><a href="#6-2-플래그-인수" class="headerlink" title="6-2) 플래그 인수"></a>6-2) 플래그 인수</h3><p>플래그 인수는 추하다. 함수로 boolean형태로 넘기는 형태는 정말 끔찍하다. 왜냐하면, 함수가 한꺼번에 여러가지를 처리한다고 대놓고 공표하는 셈이니까!<br>플래그가 참이면 이거 거짓이면 저거 이런식으로 말이다. (2가지 추상형태로 나뉘게됨)</p>
<h3 id="6-3-이항-함수"><a href="#6-3-이항-함수" class="headerlink" title="6-3) 이항 함수"></a>6-3) 이항 함수</h3><p>인수가 2개인 함수는 인수가 1개인 함수보다 이해하기 어렵다. 이항함수가 무조건 나쁘다는것은 아니고, 프로그램 짜다보면 불가피 한 경우가 생긴다.<br>하지만 그만큼 위험이 따른다는 사실을 인지하고 가능하면 단항함수로 바꾸도록 애써야한다. </p>
<h3 id="6-4-삼항-함수"><a href="#6-4-삼항-함수" class="headerlink" title="6-4) 삼항 함수"></a>6-4) 삼항 함수</h3><p>이건 2항보다 더 이해하기 어렵다. 그래서 삼항함수는 만들때는 신중히 고려하도록 권고하고있다. </p>
<h3 id="6-5-인수-객체"><a href="#6-5-인수-객체" class="headerlink" title="6-5) 인수 객체"></a>6-5) 인수 객체</h3><p>인수가 2-3개 필요하다면 일부를 독자적인 클래스 변수로 선언할 가능성을 짚어본다.</p>
<blockquote><p>Circle makeCircle(double x, double y, double radius);<br>Circle makeCircle(Point point, double radius); </p>
</blockquote>

<p><code>Point</code>객체로 어떻게 3개 인수를 2개인수로 눈속임이라 여겨질지 모르겠으나 그렇지않다. 위 예제에서는 x와y를 묶었듯이 변수를 묶어 넘기려면 이름을 붙여야 하므로 결국은 개념을 표현하게 된다. </p>
<h3 id="6-7-인수-목록"><a href="#6-7-인수-목록" class="headerlink" title="6-7) 인수 목록"></a>6-7) 인수 목록</h3><p>때로는 인수 개수가 가변적인 함수도 필요하다. <code>String.format</code> 메서드가 가장 좋은 예이다.<br><code>String.format</code>메서드는 여러개의 String을 받는 가변인수를 포함한다. 따라서 사용될때는 여러가지 인수를 받지만, 결국은 이항함수이다.<br>가변인수를 취하는 함수는 단항,이항,삼항 함수로 취급할수 있다. 하지만 이를 넘어서는 인수를 사용할 경우 문제가 있다. (결국 가변인수를 사용해도 3항이상 넘어가는걸 유의하자는 의미)</p>
<h3 id="6-8-동사와-키워드"><a href="#6-8-동사와-키워드" class="headerlink" title="6-8) 동사와 키워드"></a>6-8) 동사와 키워드</h3><p>함수의 의도나 인수의 순서와 의도를 제대로 표현하려면 좋은 함수 이름이 필수다! 단항 함수는 함수와 인수가 동사/명사 쌍을 이뤄야한다. (ex- writeField(name))<br>그리고 함수이름에 키워드를 추가하는 형식이다. (assertEquals -&gt; assertExpectedEqualsActual(expected, actual)) </p>
<h2 id="7-부수효과를-일으키지마라"><a href="#7-부수효과를-일으키지마라" class="headerlink" title="7. 부수효과를 일으키지마라!"></a>7. 부수효과를 일으키지마라!</h2><p>부수효과는 거짓말이다. 함수에서 한가지만 하겠다고 약속했는데, 남몰래 다른 짓을 하니까. 때로는 함수로 넘어온 인수나 시스템 전역 변수를 수정한다. 어느쪽이든 교활하고 해로운 거짓말이다.<br>많은 경우 시간적인 결합이나 순서 종속성을 초래한다. 결론은 두가지 일을 하게되면 차라리 메서드명을 두가지일을 한다고 명시를 하도록 해서 개발자가 명확하게 기능을 메서드명으로 이해할수있도록 하자. </p>
<h2 id="8-명령과-조회를-분리하라"><a href="#8-명령과-조회를-분리하라" class="headerlink" title="8. 명령과 조회를 분리하라!"></a>8. 명령과 조회를 분리하라!</h2><p>함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야한다. 둘 다 하면 안된다. 즉, 객체 상태를 변경하거나 아니면 객체 정보를 반환하거나 둘 중 하나다.<br>둘다 하면 혼란을 초래한다. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">set</span><span class="params">(String attribute, String value)</span></span>; </span><br></pre></td></tr></table></figure>

<p>위 함수는 이름이 attribute인 속성을 찾아 값을 value로 설정한후 성공하면 true, 실패면 false로 리턴하도록 한다.<br>이 상태에서 if(set(“username”,”unclebob”))..이렇게 사용하면, 이해가 될까? 안된다..<br>따라서 username이라는 attribute가 존재하는지 확인하는 메서드와 set하는 메서드는 분리 되어야한다. </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(attributeExists(<span class="string">&quot;username&quot;</span>)) &#123;</span><br><span class="line">	setAttribute(<span class="string">&quot;username&quot;</span>,<span class="string">&quot;unclebob&quot;</span>); </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<h2 id="9-오류코드보다-예외를-사용하라"><a href="#9-오류코드보다-예외를-사용하라" class="headerlink" title="9. 오류코드보다 예외를 사용하라!"></a>9. 오류코드보다 예외를 사용하라!</h2><p>오류로 걸러낼때 상수 혹은 변수로 비교해서 걸러내는것 보다, try-catch문으로 오류 를걸러내는것이 더 깔끔하다. </p>
<h3 id="9-1-try-catch-블록-뽑아내기"><a href="#9-1-try-catch-블록-뽑아내기" class="headerlink" title="9-1) try-catch 블록 뽑아내기"></a>9-1) try-catch 블록 뽑아내기</h3><p>try-catch문은 추하다. (코드가 드럽다는 소리다.) 코드 구조에 혼란을 일으키며, 정상 동작과 오류 처리 동작을 뒤섞는다. 그러므로 try-catch 블록을 별도 함수로 뽑아내는 편이 좋다.<br>(try-catch문을 별로로 메서드로 추출하라는 소리다.)</p>
<h3 id="9-2-오류처리도-한-가지-작업이다"><a href="#9-2-오류처리도-한-가지-작업이다" class="headerlink" title="9-2) 오류처리도 한 가지 작업이다"></a>9-2) 오류처리도 한 가지 작업이다</h3><p>함수는 한가지 작업만 해야한다. 오류처리도 마찬가지다. 오류를 처리하는 함수는 오류만 처리해야 마땅하다. </p>
<h3 id="9-3-Error-java-의존성-자석"><a href="#9-3-Error-java-의존성-자석" class="headerlink" title="9-3) Error.java 의존성 자석"></a>9-3) Error.java 의존성 자석</h3><p>오류 코드를 반환한다는건 클래스든 열거형 변수든 어디선가 오류 코드를 정의한다는 소리다.<br>결론은 위 와같이 변수를 추가해서 하는것보다, 예외클래스를 하나 생성해서 예외처리를 하는것이 차라리 더 낫다. 오류 코드대신 예외처리를 하는 방향으로 하자. </p>
<h2 id="10-반복하지-마라"><a href="#10-반복하지-마라" class="headerlink" title="10. 반복하지 마라!"></a>10. 반복하지 마라!</h2><p>중복코드를 남발하지 말자는 소리다 </p>
<h2 id="11-구조적-프로그래밍"><a href="#11-구조적-프로그래밍" class="headerlink" title="11. 구조적 프로그래밍"></a>11. 구조적 프로그래밍</h2><p>함수는 return문이 하나 여야한다. loop안에서 break,continue같은걸 사용해서는 안되며, goto문은 더더욱 안된다.<br>단, 함수를 작게 만든다면, 간혹 return,break,continue를 여러차례 사용해도 괜찮다. </p>
<h2 id="12-함수를-어떻게-짜죠"><a href="#12-함수를-어떻게-짜죠" class="headerlink" title="12. 함수를 어떻게 짜죠 ?"></a>12. 함수를 어떻게 짜죠 ?</h2><p>코딩은 글짓기와 유사함.<br>일단 코딩함(들여쓰기도 많고 중복도 많고해도 일단 짠다. 1차원적 코딩) -&gt; 단위테스트 수행 -&gt; 코드다듬기 -&gt; 함수만들고, 이름바꾸고,중복제거하고 -&gt; 메서드줄이고 순서바꿈 -&gt; 때로는 전체 클래스 쪼갬 (이와중에도 단위테스트는 여전히 통과되야함.)</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/21/clean-code-2/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/20/clean-code-1/"
                            aria-label=": clean_code_1"
                        >
                            clean_code_1
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-20T11:22:29+00:00">
	
		    Jan 20, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Clean-Code/">Clean Code</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%EC%9D%98%EB%AF%B8-%EC%9E%88%EB%8A%94-%EC%9D%B4%EB%A6%84/">의미 있는 이름</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="의미-있는-이름"><a href="#의미-있는-이름" class="headerlink" title="의미 있는 이름"></a>의미 있는 이름</h1><h2 id="1-의도를-분명히-밝혀라"><a href="#1-의도를-분명히-밝혀라" class="headerlink" title="1. 의도를 분명히 밝혀라"></a>1. 의도를 분명히 밝혀라</h2><blockquote><p><strong>변수나 함수 그리고 클래스 이름은 다음과 같은 굵직한 질문에 모두 답해야한다.</strong> </p>
<ul>
<li>변수(혹은 함수나 클래스)의 존재 이유는? </li>
<li>수행 기능은? </li>
<li>사용 방법은? </li>
<li>따로 주석이 필요하다면 의도를 분명히 드러내지 못했다는 말이다.  </li>
</ul>
</blockquote>

<p>의도가 드러나는 이름을 사용하면 코드 이해와 변경이 쉬워진다. 다음 코드는 무엇을 할까?</p>
<figure class="highlight java"><figcaption><span>의미가불명확한코드</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;<span class="keyword">int</span>[]&gt; getThen() &#123;</span><br><span class="line">	<span class="keyword">public</span> List&lt;<span class="keyword">int</span>[]&gt; list1 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span>[] x : theList) &#123;</span><br><span class="line">		<span class="keyword">if</span>(x[<span class="number">0</span>] == <span class="number">4</span>)</span><br><span class="line">			list1.add(x)</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> list1;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>의미가부여된코드1</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> List&lt;<span class="keyword">int</span>[]&gt; getFlaggedCells() &#123;</span><br><span class="line">	List&lt;<span class="keyword">int</span>[]&gt; flaggedCells = ArrayList&lt;&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span>[] cell: gameBoard) &#123;</span><br><span class="line">		<span class="keyword">if</span>(cell[STATUS_VALUE] == FLAGGED) &#123;</span><br><span class="line">			flaggedCells.add(cell); </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> flaggedCells; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight java"><figcaption><span>의미가부여된코드2</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Cell&gt; <span class="title">getFlaggedCells</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	List&lt;Cell&gt; flaggedCells = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">for</span>(Cell cell : gameBoard) &#123;</span><br><span class="line">		<span class="keyword">if</span>(cell.isFlagged()) &#123;</span><br><span class="line">			flaggedCells.add(cell);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> flaggedCells; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1,2,3번 코드가 발전된 부분을 비교해보자. 우선 1번에서 2번코드는 의미를 부여해서 코드가 어떤 동작을 목적으로 개발되었는지 알수있도록 의미를 부여하였으며, 2번에서 3번코드는 <code>Cell</code>이라는 객체를 만들어 해당 객체의 명확한 의도를 정의 했고,<br><code>cell.isFlagged()</code> 메서드를 작성해서 FLAGGED라는 상수를 감춰서 좀 더 이해하기 쉽고 이쁘게 코드를 구성했다는 걸 알수있다. 이 처럼 모든 코드에는 명확한 의도가 네이밍을 통해 알수 있어야한다. </p>
<h2 id="2-그릇된-정보를-피하라"><a href="#2-그릇된-정보를-피하라" class="headerlink" title="2. 그릇된 정보를 피하라"></a>2. 그릇된 정보를 피하라</h2><p>프로그래머는 코드에 그릇된 단서를 남겨서는 안된다. </p>
<h3 id="그릇된-단서는-코드-의미를-흐린다"><a href="#그릇된-단서는-코드-의미를-흐린다" class="headerlink" title="그릇된 단서는 코드 의미를 흐린다."></a>그릇된 단서는 코드 의미를 흐린다.</h3><p>예를들어, 여러 계정을 그룹으로 묶을 때, 실제 List가 아니라면, aacountList라 명명하지 않는다. 프로그래머에게 List라는 단어는 특수한 의미다.<br>계정을 담는 컨테이너가 실제 List가 아니라면 프로그래머에게 그릇된 정보를 제공하는 셈이다. 그러므로 accountGroup, bunchOfAccounts 아니면, Accounts라 명명한다. </p>
<h3 id="서로-흡사한-이름을-사용하지-않는다"><a href="#서로-흡사한-이름을-사용하지-않는다" class="headerlink" title="서로 흡사한 이름을 사용하지 않는다."></a>서로 흡사한 이름을 사용하지 않는다.</h3><p>한 모듈에서 XYZControllerForEfficientHandlingOfStrings 라는 이름을 사용하고, 조금 떨어진 모듈에서 XYZContllerForEfficientStorageOfStrings라는 이름을 사용한다면? 두 단어는 겁나게 비슷하다. </p>
<h3 id="유사한-개념은-유사한-표기법을-사용한다"><a href="#유사한-개념은-유사한-표기법을-사용한다" class="headerlink" title="유사한 개념은 유사한 표기법을 사용한다."></a>유사한 개념은 유사한 표기법을 사용한다.</h3><p>이것도 <strong>정보</strong> 다. 일관성이 떨어지는 표기법은 <strong>그릇된 정보</strong> 다. 요즘 IDE는 몇자만 입력하면 후보목록에 유사한 개념이 알파멧 순으로 나온다면 그리고 각 개념의 차이가 명백히 드러난다면 코드 자동 완성 기능은 굉장히 유용해진다.<br>십중팔구 개발자들은 네이밍만 보고 객체를 선택한다(상세 주석이나 메서드 목록 잘 안보고 네이밍만으로 판단하는 경우 많음)</p>
<h2 id="3-의미-있게-구분하라"><a href="#3-의미-있게-구분하라" class="headerlink" title="3. 의미 있게 구분하라"></a>3. 의미 있게 구분하라</h2><h3 id="컴파일러를-통과할지라도-연속된-숫자를-덧붙이거나-불용어-noise-word-를-추가하는-방식은-비추천"><a href="#컴파일러를-통과할지라도-연속된-숫자를-덧붙이거나-불용어-noise-word-를-추가하는-방식은-비추천" class="headerlink" title="컴파일러를 통과할지라도 연속된 숫자를 덧붙이거나 불용어 (noise word) 를 추가하는 방식은 비추천"></a>컴파일러를 통과할지라도 연속된 숫자를 덧붙이거나 불용어 (noise word) 를 추가하는 방식은 비추천</h3><p>이름이 달라야한다면 의미도 달라져야함. (a1,a2….) </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">copyChars</span><span class="params">(<span class="keyword">char</span> a1[] , <span class="keyword">char</span> a2[])</span> </span>&#123;</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a1.length; i++) &#123;</span><br><span class="line">		a2[i]  = a1[i]; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 코드에서 함수의 인수명을 source 와 destination 으로 사용했으면 가독성이 훨씬 좋았을것이다. </p>
<h3 id="불용어를-추가한-이름-역시-아무런-정보를-제공하지-못함"><a href="#불용어를-추가한-이름-역시-아무런-정보를-제공하지-못함" class="headerlink" title="불용어를 추가한 이름 역시 아무런 정보를 제공하지 못함."></a>불용어를 추가한 이름 역시 아무런 정보를 제공하지 못함.</h3><p><code>Product</code>라는 클래스가 있다고 가정하면, 다른 클래스를 <code>ProductInfo</code>, <code>ProductData</code> 라 부른다면 개념을 구분하지 않은 채 이름만 달리는 경우다. Info 와 Data는 의미가 불명확하기 때문에 그 클래스나 메소드등의 기능에 따라 분명한 네이밍을 정하는것이 중요하다. </p>
<h2 id="4-발음하기-쉬운-이름을-사용하라"><a href="#4-발음하기-쉬운-이름을-사용하라" class="headerlink" title="4. 발음하기 쉬운 이름을 사용하라."></a>4. 발음하기 쉬운 이름을 사용하라.</h2><p>저자가 아는 분이 <code>genymdhms</code>(generate date, year, month,day,hour,minute,second)라는 네이밍을 사용했다고 한다. 저거 어떻게 발음해야함? 부르기도 힘들다. 저딴식으로 네이밍 적지말자. 부르기 쉬운 명칭이 이해도 빠르다. </p>
<h2 id="5-검색하기-쉬운-이름을-사용하라"><a href="#5-검색하기-쉬운-이름을-사용하라" class="headerlink" title="5. 검색하기 쉬운 이름을 사용하라."></a>5. 검색하기 쉬운 이름을 사용하라.</h2><p>보통 변수나 상수명을 정의할때 대충 정의하면 무슨 의미인지도 모르고, 공통적으로 사용되는 단어나 알파벳등이 들어갔을때 검색하기 힘든 경우가 있다. 어떤 변수,상수,클래스,메서드든 간에 의미를 확인해서 검색하기 쉬운 단어로 사용하도록 하자.</p>
<h2 id="6-인코딩을-피하라"><a href="#6-인코딩을-피하라" class="headerlink" title="6. 인코딩을 피하라."></a>6. 인코딩을 피하라.</h2><p>대표적으로 헝거리식 표기법 예전 C혹은 WinAPI시대에서나 볼수있는 부분으로, 변수명 앞에 멤버변수라는 의미를 담아 m_name 혹은 인터페이스 클래스라는 의미를 담아 IShape이런식으로 명칭을 정해서 사용을 자주했는데, 이제는 이런식으로 굳이 안해도 컴파일이나 개발하는데 큰 이슈를 주지않음<br>(예전에는 메서드 길이제한 문자제한등으로 헝거리식표기법을 사용했었음. 하지만 이제는 시대가 발전하면서 큰의미가 없어졌음. 메서드에 수십자적어도 심지어 한글을 적어도 이슈없음.)</p>
<h2 id="7-자신의-기억력을-자랑하지-마라"><a href="#7-자신의-기억력을-자랑하지-마라" class="headerlink" title="7. 자신의 기억력을 자랑하지 마라."></a>7. 자신의 기억력을 자랑하지 마라.</h2><p>변수명 개같이 짓지 말자. for문을 예를들면 비교적 로직이 짧은 for문을 사용하면, i,x등의 변수명을 사용해도 괜찮지만, 로직이 복잡하고 내용이 긴 for문은 명확한 변수명으로 타 개발자가 혼돈하지 않고 명시하도록 하자. </p>
<h2 id="8-클래스-이름"><a href="#8-클래스-이름" class="headerlink" title="8. 클래스 이름"></a>8. 클래스 이름</h2><p>클래스 이름 과 객체 이름은 명사나 명사구가 적합함. (Customer, WikiPAge..)</p>
<h2 id="9-메서드-이름"><a href="#9-메서드-이름" class="headerlink" title="9. 메서드 이름"></a>9. 메서드 이름</h2><p>메서드 이름은 동사나 동사구가 적합함. (postPayment, deletePage, save …) 그리고 접근자,변경자,조건자는 자바빈 표준에 따라 get,set,is를 붙히도록 하자.<br>덧붙여서 생성자를 중복정의 할때 (다중 생성자) 정적 팩터리 메서드를 사용하도록 하자.(effective java item1 참고)</p>
<h2 id="10-기발한-이름은-피하라"><a href="#10-기발한-이름은-피하라" class="headerlink" title="10. 기발한 이름은 피하라"></a>10. 기발한 이름은 피하라</h2><p>나만의 독창적인 이름으로 주변 개발자들이 못알아보게 만드는 이슈를 만들게 하지말자. 가급적 팀내 정한 네이밍 룰이 있으면 그 형식을 따르도록 하자. </p>
<h2 id="11-한-개념에-한-단어를-사용하라"><a href="#11-한-개념에-한-단어를-사용하라" class="headerlink" title="11. 한 개념에 한 단어를 사용하라."></a>11. 한 개념에 한 단어를 사용하라.</h2><p>추상적인 개념 하나에 단어 하나를 선택해 이를 고수하도록 하자. 예를들어, 똑같은 메서드를 클래스마다 fetch, retrieve, get 으로 제각각 부르면 혼란스럽다. 통일해서 사용하도록 하자. </p>
<h2 id="12-말장난을-하지-마라"><a href="#12-말장난을-하지-마라" class="headerlink" title="12. 말장난을 하지 마라."></a>12. 말장난을 하지 마라.</h2><p>11장 처럼 한개념에 한 단어를 사용하라고 해서 모든 <code>add</code>메서드를 1+1 처럼 더하는 값의 결과물을 내는 메서드를 사용했는데, 다른 add메서드에서는 집합체 안에 새로운 값 하나를 추가하는 메서드를 add로 사용하는건 곤란하다.<br>새로운 값이 추가되었을때는 append 혹은 insert로 네이밍하여 add와 혼용하지 않도록 조심하자.</p>
<h2 id="13-해법-영역에서-가져온-이름을-사용하라"><a href="#13-해법-영역에서-가져온-이름을-사용하라" class="headerlink" title="13. 해법 영역에서 가져온 이름을 사용하라."></a>13. 해법 영역에서 가져온 이름을 사용하라.</h2><p>코드를 읽는 사람도 프로그래머라는 사실을 명심하자. 그러므로 전산용어, 알고리즘, 패턴, 수학용어등을 사용해도됨. </p>
<h2 id="14-문제-영역에서-가져온-이름을-사용하라"><a href="#14-문제-영역에서-가져온-이름을-사용하라" class="headerlink" title="14. 문제 영역에서 가져온 이름을 사용하라."></a>14. 문제 영역에서 가져온 이름을 사용하라.</h2><p>적절한 프로그래머 용어가 없다면 문제 영역에서 이름을 가져온다. 그럼 코드를 보수하는 프로그래머가 분야 전문가에게 의미를 물어 파악 할수 있다. </p>
<h2 id="15-의미있는-맥락을-추가하라"><a href="#15-의미있는-맥락을-추가하라" class="headerlink" title="15. 의미있는 맥락을 추가하라."></a>15. 의미있는 맥락을 추가하라.</h2><p>아래 코드 2개를 비교해보자. </p>
<figure class="highlight java"><figcaption><span>맥락이 불분명한 함수</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">printGuessStatistics</span><span class="params">(<span class="keyword">char</span> candidate, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">	String number; </span><br><span class="line">	String verb; </span><br><span class="line">	String pluralModifier; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(count == <span class="number">0</span>) &#123;</span><br><span class="line">		number = <span class="string">&quot;no&quot;</span>;</span><br><span class="line">		verb = <span class="string">&quot;are&quot;</span>;</span><br><span class="line">		pluralModifier = <span class="string">&quot;s&quot;</span>;</span><br><span class="line">		</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> (count == <span class="number">1</span>) &#123;</span><br><span class="line">		number = <span class="string">&quot;1&quot;</span>; </span><br><span class="line">		verb = <span class="string">&quot;is&quot;</span>; </span><br><span class="line">		pluralModifier = <span class="string">&quot;&quot;</span>; </span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		number = Integer.toString(count);</span><br><span class="line">		verb = <span class="string">&quot;are&quot;</span>;</span><br><span class="line">		pluralModifier = <span class="string">&quot;s&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	String guessMessage = String.format(<span class="string">&quot;There %s %s %s%s&quot;</span>, verb, number, candidate, pluraModifier);</span><br><span class="line">	print(guessMessage);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<figure class="highlight java"><figcaption><span>맥락이 분명한 함수</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GuessStatisticsMessage</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> String number; </span><br><span class="line">	<span class="keyword">private</span> String verb; </span><br><span class="line">	<span class="keyword">private</span> String pluralModifier; </span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">make</span><span class="params">(<span class="keyword">char</span> candidate, <span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">		createPluralDependentMessageParts(count);</span><br><span class="line">		<span class="keyword">return</span> String.format(<span class="string">&quot;There %s %s %s%s&quot;</span>, verb, number, candidate, pluraModifier);</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">createPluralDependentMessageParts</span><span class="params">(<span class="keyword">int</span> count)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">if</span> (count == <span class="number">0</span>) &#123;</span><br><span class="line">			thereAreNoLetters();</span><br><span class="line">		&#125; <span class="keyword">else</span> <span class="keyword">if</span> (count == <span class="number">1</span>) &#123;</span><br><span class="line">			thereIsOneLetter();</span><br><span class="line">		&#125; <span class="keyword">else</span> &#123; </span><br><span class="line">			thereAreManyLetters(count); </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">thereAreManyLetters</span><span class="params">(<span class="keyword">int</span> count )</span> </span>&#123;</span><br><span class="line">		number = Integer.toString(count);</span><br><span class="line">		verb = <span class="string">&quot;are&quot;</span>;</span><br><span class="line">		pluralModifier = <span class="string">&quot;s&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">thereIsOneLetter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		number = <span class="string">&quot;1&quot;</span>; </span><br><span class="line">		verb = <span class="string">&quot;is&quot;</span>; </span><br><span class="line">		pluralModifier = <span class="string">&quot;&quot;</span>; </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">thereAreNoLetters</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		number = <span class="string">&quot;no&quot;</span>;</span><br><span class="line">		verb = <span class="string">&quot;are&quot;</span>;</span><br><span class="line">		pluralModifier = <span class="string">&quot;s&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>1번코드를 보면서 어떤 부분이 느껴지는가? 변수만 보고서 의미가 파악되는가? 함수 이름으로는 대강 어떤 동작을 하겠거니 유추는 가능하지만, 알고리즘에서 나머지 맥락을 제공하는걸 알수있다. (결국 로직을 다봐야 알수있다는 말.)<br>결국 메서드만 봐서는 세 변수의 의미가 불분명하다. 그럼 개선된 코드에서는 어떻게 명확한 코드로 만들었을까? 우선 코드1번은 함수가 길다. 그리고 세변수를 함수 전반에서 사용한다. 그래서 함수를 작은 조각으로 쪼개고자 GuessStatisticsMessage라는 클래스는 만든뒤,<br>세 변수를 클래스에 멤버변수로 넣었다. 그러면 세 변수는 맥락이 분명해 진다. 즉, 세 변수는 확실하게 GuessStatisticsMessage 에 속한다. 이렇게 맥락을 개선하면 함수를 쪼개기가 쉬워지므로 알고리즘도 좀 더 명확해진다.<br>개인적으로 이번장에서 가장 감명깊게 본 파트이다. 개인적으로 개발하면서 이 부분에서 늘 신경을 못써서, 항상 코드가 복잡해지고 난잡해지는 이슈가 있었는데, 담번에는 좀 규모있고 복잡한 로직이 들어갈때, 맥락을 정확하게 하기 위해서 클래스로 쪼개는 연습을 해보도록 하자. </p>
<h2 id="16-불필요한-맥락을-없애라"><a href="#16-불필요한-맥락을-없애라" class="headerlink" title="16. 불필요한 맥락을 없애라."></a>16. 불필요한 맥락을 없애라.</h2><p>이부분은 개인적으로 예를 들면 Gsfresh라는 프로젝트를 하고있다고 가정하자. Gsfresh가 메인이라고 하지만, 적용하는 로직이 광범위하고 클래스도 많고 변수도 많고, 메서드도 많다면 무조건 네이밍앞에 GSFCheckClaim 이런식으로 GSF를 서두에 다 붙일 필요는 없다는 의미다.<br>왜냐면 모든 관련 파일이나 변수나 메서드에 GSF~ 이런식으로 붙여버리면 검색할때도 힘들고 찾기도 힘들어 지기 때문이다. </p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/20/clean-code-1/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/18/java-effective-1/"
                            aria-label=": java-effective-1"
                        >
                            java-effective-1
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-18T08:06:18+00:00">
	
		    Jan 18, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Effective-Java/">Effective Java</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1%EA%B3%BC-%ED%8C%8C%EA%B4%B4/">객체 생성과 파괴</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>기본적으로 자바에서는 인스턴스를 얻는 수단은 public 생성자이지만,<br>클래스는 생성자와 별도로 정적 팩터리 메서드를 제공 할수 있다. </p>
<h2 id="아이템1-생성자-대신-정적-팩터리-메서드를-고려하라"><a href="#아이템1-생성자-대신-정적-팩터리-메서드를-고려하라" class="headerlink" title="아이템1. 생성자 대신 정적 팩터리 메서드를 고려하라."></a>아이템1. 생성자 대신 정적 팩터리 메서드를 고려하라.</h2><figure class="highlight java"><figcaption><span>Boolean.valueOf</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title">valueOf</span><span class="params">(<span class="keyword">boolean</span> b)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> b ? Boolean.TRUE : Boolean.FALSE; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 메서드는 기본적으로 기본 타입인 boolean을 받아 Boolean 객체 참조로 변환해 준다. </p>
<h3 id="장점1-이름을-가질수-있다-메서드의-목적을-분명하게-알수있다"><a href="#장점1-이름을-가질수-있다-메서드의-목적을-분명하게-알수있다" class="headerlink" title="장점1. 이름을 가질수 있다. (메서드의 목적을 분명하게 알수있다.)"></a>장점1. 이름을 가질수 있다. (메서드의 목적을 분명하게 알수있다.)</h3><p>자바에서 기본으로 제공하는 public생성자는 이름을 가질수없으며, 매개변수들이 포함되어 있는 생성자 역시 이름이 없다.<br>그래서 개발자들은 여러 생성자가 존재 할 경우, 어떤 역할을 하는지 한눈에 알아보기가 쉽지않을것이다.<br>이런 public생성자의 단점을 이름을 가질수있는 정적 팩터리 메서드가 해결 할 수있다. </p>
<h3 id="장점2-호출될-때마다-인스턴스를-새로-생성하지-않아도-된다"><a href="#장점2-호출될-때마다-인스턴스를-새로-생성하지-않아도-된다" class="headerlink" title="장점2. 호출될 때마다 인스턴스를 새로 생성하지 않아도 된다."></a>장점2. 호출될 때마다 인스턴스를 새로 생성하지 않아도 된다.</h3><p>자바에서 public생성자를 호출 하려면 new 키워드로 인스턴스를 생성하게 되어있다.<br>하지만 정적 팩터리 메서드를 사용하면, 매번 인스턴스를 생성하지 않아도 된다.<br>특히 불변 클래스(immutable class; 아이템17)는 인스턴스를 미리 만들어놓거나 새로 생성한 인스턴스를 캐싱하여, 재활용하는 식으로 불필요한 객체 생성을 피할수 있다. (EX&gt; Boolean.valueOf) 따라서 같은 객체가 자주 요청되는 상황이라면 성능을 상당히 끌어올려 준다.</p>
<blockquote><p>인스턴스 통제(instance-controlled) 클래스란? (ex&gt; 싱글턴)<br>=&gt; 반복된 요청에 같은 객체를 반환하는 식으로 정적 팩터리 방식의 클래스는 언제 어느 인스턴스를 살아 있게 할지를 철저히 통제 할수있다. </p>
<p>인스턴스를 통제하는 이유는?<br>=&gt; 싱글턴, 인스턴스화 불가(Util성 클래스에서 생성자 막을때), 불변 값 클래스에서 동치인 인스턴스가 단 하나임을 보장 (a == b 일때, a.equals(b) 성립) </p>
</blockquote>

<h3 id="장점3-반환-타입의-하위-타입-객체를-반환할-수-있는-능력이-있다"><a href="#장점3-반환-타입의-하위-타입-객체를-반환할-수-있는-능력이-있다" class="headerlink" title="장점3. 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다."></a>장점3. 반환 타입의 하위 타입 객체를 반환할 수 있는 능력이 있다.</h3><p>제목이 거창해서 그렇지, 간단하게 생각하면 인터페이스를 반환 타입을 갖게하고, 실제로는 인터페이스를 구현하는 구현체를 리턴하는 방식 가장 대표적인 예는 <code>java.util.Collections</code> 이다. 이 컬렉션 프레임워크는 45개의 구현체 클래스를 사용하고 있지만, 실제로 사용하는 개발자는 45개나 되는 구현체를 굳이 알필요가 없도록, 정적 팩터리 메서드를 사용하였다.<br>자바8부터는 인터페이스가 정적 메서드(public static) 를 가질 수 없는 제한이 풀렸다. 자바9에서는 private 정적메서드까지 허락하지만,정적 필드와 정적 멤버 클래스는 여전히 public이어야함. </p>
<h3 id="장점4-입력-매개변수에-따라-매번-다른-클래스의-객체를-반환할-수-있다"><a href="#장점4-입력-매개변수에-따라-매번-다른-클래스의-객체를-반환할-수-있다" class="headerlink" title="장점4. 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다."></a>장점4. 입력 매개변수에 따라 매번 다른 클래스의 객체를 반환할 수 있다.</h3><p>장점3과 비슷한 맥락이지만, 차이점은 매개변수의 갯수의 차이다. EnumSet은 public생성자가 없이 오직 정적 팩터리만 제공하는데, 원소가 64개 이하면 RegularEnumSet을 65개이상이면 JumboEnumSet의 인스턴스를 반환하게 구현되어있다.<br>하지만 굳이 개발자가 하위타입의 리턴타입을 알 필요가 있을까? 당연 없다. </p>
<h3 id="장점5-정적-팩터리-메서드를-작성하는-시점에는-반환할-객체의-클래스가-존재하지-않아도-된다"><a href="#장점5-정적-팩터리-메서드를-작성하는-시점에는-반환할-객체의-클래스가-존재하지-않아도-된다" class="headerlink" title="장점5. 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다."></a>장점5. 정적 팩터리 메서드를 작성하는 시점에는 반환할 객체의 클래스가 존재하지 않아도 된다.</h3><p>이 책에서는 위 장점의 예를 둔 부분이, JDBC이다. JDBC로 개발할때를 생각하면 어느정도 이해를 할 수 있다.</p>
<figure class="highlight java"><figcaption><span>jdbc example</span><a target="_blank" rel="noopener" href="https://www.tutorialspoint.com/jdbc-class-forname-vs-drivermanager-registerdriver">tutorialspoint.com</a></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Registering the Driver</span></span><br><span class="line">   DriverManager.registerDriver(<span class="keyword">new</span> com.mysql.jdbc.Driver());       <span class="comment">//Class.forName으로 자주 씀. </span></span><br><span class="line">   <span class="comment">//Getting the connection</span></span><br><span class="line">   String mysqlUrl = <span class="string">&quot;jdbc:mysql://localhost/mydatabase&quot;</span>;</span><br><span class="line">   Connection con = DriverManager.getConnection(mysqlUrl, <span class="string">&quot;root&quot;</span>, <span class="string">&quot;password&quot;</span>);</span><br><span class="line">   System.out.println(<span class="string">&quot;Connection established: &quot;</span>+con);</span><br></pre></td></tr></table></figure>
<p>위 코드에서 확인 할 수 있듯이, Connection을 사용하기 위해서 <code>DriverManager.registerDriver</code> 통해서 어떤 DB의 방언을 사용할것 인지 결정하고 (제공자등록API),<br>Connection인터페이스는 어떤 DB방언에도 연결할수있도록 서비스 인터페이스 역할을 담당하고, 결국 <code>DriverManager.getConnection</code>을 통해서 서비스에 접근하여 인스턴스를 얻을수있도록 한다. 여기서 DriverManager.getConnection 이 장점5의 의도이다.<br>그래서 우리가 서로 다른 DB의 방언을 제공자 등록 API를 통해 세팅하고, DB접근정보가 담겨있는 서비스접근 API를 통해서 Connection 인터페이스로 반환하게 할때, 마치 DB를 연결하기 위해 중간다리 역할 (브리지 패턴) 처럼 혹은 레고 처럼 조립되는 과정이 있다는걸 알수가 있다. 우리가 흔히 알고있는 DI(의존객체주입) 와 유사하다고 생각하면 된다. </p>
<h3 id="단점1-상속을-하려면-public이나-protected-생성자가-필요하니-정적-팩터리-메서드만-제공하면-하위-클래스를-만들수-없다"><a href="#단점1-상속을-하려면-public이나-protected-생성자가-필요하니-정적-팩터리-메서드만-제공하면-하위-클래스를-만들수-없다" class="headerlink" title="단점1. 상속을 하려면 public이나 protected 생성자가 필요하니 정적 팩터리 메서드만 제공하면 하위 클래스를 만들수 없다."></a>단점1. 상속을 하려면 public이나 protected 생성자가 필요하니 정적 팩터리 메서드만 제공하면 하위 클래스를 만들수 없다.</h3><p>java.util.Collections 컬렉션 프레임워크 처럼 유틸리티 구현 클래스들은 상속할 수 없다는 이야기다. 글쓴이는 이 제약은 상속 보다는 컴포지션을 사용(아이템 18) 하도록 유도하고, 불변 타입(아이템 17)으로 만들려면 이 제약을 지켜야하기에 오히려 장점이 아닌가라고 생각했다.</p>
<h3 id="단점2-정적-펙터리-메서드는-프로그래머가-찾기-힘들다"><a href="#단점2-정적-펙터리-메서드는-프로그래머가-찾기-힘들다" class="headerlink" title="단점2. 정적 펙터리 메서드는 프로그래머가 찾기 힘들다."></a>단점2. 정적 펙터리 메서드는 프로그래머가 찾기 힘들다.</h3><p>개발자들이 각자의 네이밍룰로 정적 펙터리 메서드를 구현하면, 그 메서드를 찾기위해서 클래스를 찾아서 분석 해야하는 비용이 생겨서, 찾기 어렵다고 표현한것이 아닐까? 추측해본다.<br>그래서 글쓴이는 from, of, valueOf. getInstance 등과 같은 범용적으로 사용되는 정적 팩터리 메서드를 예시로 들면서, 네이밍으로도 그 기능을 알 수 있도록 구현하는걸 추천하고 있다. </p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/18/java-effective-1/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/18/java-effective-4/"
                            aria-label=": java-effective-4"
                        >
                            java-effective-4
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-18T05:23:31+00:00">
	
		    Jan 18, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Effective-Java/">Effective Java</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1%EA%B3%BC-%ED%8C%8C%EA%B4%B4/">객체 생성과 파괴</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>단순히 정적 메서드와 정적 필드만을 담은 클래스로 만들고 싶을 때가 있다. 예컨데, <code>java.lang.Math</code>와 <code>java.ulti.Arrays</code> 처럼 기본 타입이 값이나 배열 관련 메서드들을 모아놓을수도 있으며,     <code>java.util.Collections</code> 처럼 특정 인터페이스를 구현하는 객체를 생성해주는 정적 팩터리 메서드를 모아 놓을수도 있다.(java8 부터는 이런 메서드를 인터페이스에 넣을 수 있다.) 마지막으로, final 클래스와 관련한 메서드들을 모아놓을 때도 사용한다. (final 클래스를 상속해서 하위 클래스에 메서드를 넣는 건 불가능하기 때문)</p>
<h2 id="아이템4-인스턴스화를-막으려거든-private-생성자를-사용하라"><a href="#아이템4-인스턴스화를-막으려거든-private-생성자를-사용하라" class="headerlink" title="아이템4. 인스턴스화를 막으려거든 private 생성자를 사용하라."></a>아이템4. 인스턴스화를 막으려거든 private 생성자를 사용하라.</h2><p>정적 멤버만 담은 유틸리티 클래스는 인스턴스로 만들어 쓰려고 설계한 게 아니다. 하지만 생성자를 명시하지 않으면 컴파일러가 자동으로 기본생성자를 만들어준다. (public생성자 자동생성) </p>
<p><strong>추상 클래스로 만드는 것으로는 인스턴스화를 막을 수 없다.</strong>  왜냐하면 하위클래스를 만들어서 인스턴스 생성하면 그만이기때문이다. 그리고 이를 본 사용자들은 상속해서 쓰라는 뜻으로 오해할 수 있어서 더 큰 문제를 야기 시킬수 있다. 다행히도 인스턴스화를 막는 방법은 아주 간단한다. </p>
<p><strong>private 생성자를 추가하면 클래스의 인스턴스화를 막을수 있다.</strong> </p>
<figure class="highlight java"><figcaption><span>인스턴스를 만들수없는 유틸클래스</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UtilityClass</span> </span>&#123;</span><br><span class="line">	<span class="comment">//기본 생성자가 만들어지는 것을 막는다 (인스턴스화 방지용)</span></span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">UtilityClass</span><span class="params">()</span> </span>&#123;</span><br><span class="line">		<span class="keyword">throw</span> <span class="keyword">new</span> AssertionError(); </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>위 와같이 private 생성자를 만들어두면, 인스턴스화가 안되며, 위 예시처럼 꼭 예외를 던질필요는 없으나, 개발자가 실수하지 않도록 명시를 해주는 편이 나쁘지는 않다. 또한 저자는 private생성자로 인스턴스 생성을 막았으면, 가독성을 위해서 위 예시처럼 주석을 달아두라고 권고하고있다. 그리고 이 방식은 상속을 불가능하게 하는 효과도 있다. 모든 생성자는 명시적인든 묵시적이든 상위 클래스의 생성자를 호출하게 되는데, 이를 private으로 선언했으니, 하위 클래스가 상위 클래스의 생성자에 접근할 길이 막혀버린다. </p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/18/java-effective-4/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/18/java-effective-3/"
                            aria-label=": java-effective-3"
                        >
                            java-effective-3
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-18T01:58:36+00:00">
	
		    Jan 18, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Effective-Java/">Effective Java</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1%EA%B3%BC-%ED%8C%8C%EA%B4%B4/">객체 생성과 파괴</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <blockquote><p>싱글턴(singleton) 이란?<br>=&gt; 인스턴스를 오직 하나만 생성할 수 있는 클래스<br>=&gt; ex) 함수와 같은 무상태 객체 (stateless object) , 설계상 유일해야하는 시스템 컨포넌트 </p>
</blockquote>

<h2 id="아이템3-private생성자나-열거타입으로-싱글턴임을-보증하라"><a href="#아이템3-private생성자나-열거타입으로-싱글턴임을-보증하라" class="headerlink" title="아이템3. private생성자나 열거타입으로 싱글턴임을 보증하라."></a>아이템3. private생성자나 열거타입으로 싱글턴임을 보증하라.</h2><p><strong>클래스를 싱글턴으로 만들면 이를 사용하는 클라이언트를 테스트하기가 어려워질 수 있다.</strong> 그 이유는 타입을 인터페이스로 정의한 다음 그 인터페이스를 구현해서 만든 싱글턴이 아니라면 싱글턴 인스턴스를 가짜 구현으로 대체 할 수 없기때문이다. 저자는 싱글턴 만드는 방식을 3가지로 소개한다. 아래 내용 참고 해보자. </p>
<h3 id="싱글턴1-public-static-멤버가-final-필드-방식"><a href="#싱글턴1-public-static-멤버가-final-필드-방식" class="headerlink" title="싱글턴1. public static 멤버가 final 필드 방식"></a>싱글턴1. public static 멤버가 final 필드 방식</h3><figure class="highlight java"><figcaption><span>public static final 필드 방식 싱긑턴</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elvis</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Elvis INSTANCE = <span class="keyword">new</span> Elvis(); </span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Elvis</span><span class="params">()</span> </span>&#123;&#125; <span class="comment">//내부 코드 중략 </span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">leaveTheBuilding</span><span class="params">()</span> </span>&#123;&#125; <span class="comment">//내부 코드 중략 </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="싱글턴1의-장점"><a href="#싱글턴1의-장점" class="headerlink" title="싱글턴1의 장점"></a>싱글턴1의 장점</h4><ul>
<li>해당 클래스가 싱글턴임이 API에 명핵하게 드러남</li>
<li>간결함 </li>
</ul>
<h3 id="싱글턴2-정적팩터리-방식의-싱글턴"><a href="#싱글턴2-정적팩터리-방식의-싱글턴" class="headerlink" title="싱글턴2. 정적팩터리 방식의 싱글턴"></a>싱글턴2. 정적팩터리 방식의 싱글턴</h3><figure class="highlight java"><figcaption><span>정적팩터리 방식의 싱글턴</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Elvis</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Elvis INSTANCE = <span class="keyword">new</span> Elvis(); </span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Elvis</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Elvis <span class="title">getInstance</span><span class="params">()</span> </span>&#123;<span class="keyword">return</span> INSTANCE;&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">leaveTheBuilding</span><span class="params">()</span> </span>&#123;&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="싱글턴2의-장점"><a href="#싱글턴2의-장점" class="headerlink" title="싱글턴2의 장점"></a>싱글턴2의 장점</h4><ul>
<li><p>마음만 먹으면 API를 바꾸지 않아도, 싱글턴이 아니게 변경 가능 </p>
</li>
<li><p>정적 팩터리를 제네릭 싱글턴 팩터리로 만들 수 있음 (아이템 30)</p>
</li>
<li><p>정적 팩터리의 메서드 참조를 공급자(supplier)로 사용할수 있음</p>
<figure class="highlight java"><figcaption><span>supplier 적용</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Supplier&lt;Elvis&gt; = Elvis::getInstance; </span><br></pre></td></tr></table></figure>

</li>
</ul>
<p>싱글턴1,2 방식으로 싱글턴을 개발하면, 직렬화 할때 Serializable을 구현만 하면 안되고, 역직렬화 되었을때 인스턴스가 생성되는 부분을 초반에 조져야 한다. 역직렬화 공격을 방어하려면, 아래 코드를 확인해보자.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;싱글턴임을 보장해주는 readResolve 메서드 </span><br><span class="line">private Object readResolve() &#123;</span><br><span class="line">	&#x2F;&#x2F;진짜 Elvis는 반환하고, 가짜는 GC에 버린다. </span><br><span class="line">	return INSTANCE; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="싱글턴3-원소가-하나인-열거타입-선언"><a href="#싱글턴3-원소가-하나인-열거타입-선언" class="headerlink" title="싱글턴3. 원소가 하나인 열거타입 선언"></a>싱글턴3. 원소가 하나인 열거타입 선언</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public enum Elvis &#123;</span><br><span class="line">	INSTANCE; </span><br><span class="line">	</span><br><span class="line">	public void leaveTheBuilding() &#123;&#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="싱글턴3의-장점"><a href="#싱글턴3의-장점" class="headerlink" title="싱글턴3의 장점"></a>싱글턴3의 장점</h4><ul>
<li>싱글턴1 방식과 비슷하지만, 더 간결하고 추가적인 노력없이 직렬화 가능 하며 심지어 아주 복잡한 직렬화 상황이나 리플렉션 공격에도 제2의 인스턴스가 생성되는걸 방지 할 수 있다.</li>
</ul>
<p>조금 부자연스러워 보일수는 있는데, 저자는 대부분상황에서는 원소가 하나뿐인 열거타입이 싱글턴 만드는 가장 좋은 방법이라고 소개하고있다. 단, 만들려는 싱글턴이 Enum외의 클래스를 상속해야 한다면 이 방법은 사용할수 없다고 한다. (열거 타입이 다른 인터페이스를 구현하도록 선언 할 수는 있다.)</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/18/java-effective-3/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2021/01/16/java-effective-2/"
                            aria-label=": java-effective-2"
                        >
                            java-effective-2
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2021-01-16T04:57:19+00:00">
	
		    Jan 16, 2021
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Effective-Java/">Effective Java</a>, <a class="category-link" href="/categories/Study/">Study</a>, <a class="category-link" href="/categories/%EA%B0%9D%EC%B2%B4-%EC%83%9D%EC%84%B1%EA%B3%BC-%ED%8C%8C%EA%B4%B4/">객체 생성과 파괴</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>객체 생성함에 있어서, 아이템1 에서 학습한 정적팩터리 와 생성자에는 똑같은 제약이 하나 있다. 선택적 매개변수가 많을때 적절히 대응하기 어렵다는 점이다. </p>
<h2 id="아이템2-생성자에-매개변수가-많다면-빌더를-고려하라"><a href="#아이템2-생성자에-매개변수가-많다면-빌더를-고려하라" class="headerlink" title="아이템2. 생성자에 매개변수가 많다면 빌더를 고려하라."></a>아이템2. 생성자에 매개변수가 많다면 빌더를 고려하라.</h2><blockquote><p>점층적 생성자 패턴도 쓸 수는 있지만, 매개변수 개수가 많아지면 클라이언트 코드를 작성하거나 읽기 어렵다. </p>
</blockquote>

<h3 id="해결안1-생성자"><a href="#해결안1-생성자" class="headerlink" title="해결안1. 생성자"></a>해결안1. 생성자</h3><figure class="highlight java"><figcaption><span>점층적 생성자 패턴</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NutiritionFacts coke = <span class="keyword">new</span> NutritionFacts(<span class="number">240</span>,<span class="number">8</span>,<span class="number">100</span>,<span class="number">35</span>,<span class="number">27</span>);</span><br></pre></td></tr></table></figure>

<p>위 코드를 보았을때 무엇이 느껴지는가? 정말 해당 클래스 스펙을 확인하지 않고서는 식별이 어렵고, 개인적으로 IDE의 버프를 받아 변수명 힌트를 받지 않으면, 엄하게 다른 값 넣고, 삽질하는 경우를 갠적으로 좀 겪어봤다. </p>
<h3 id="해결안2-자바빈즈-Java-Beans"><a href="#해결안2-자바빈즈-Java-Beans" class="headerlink" title="해결안2. 자바빈즈(Java Beans)"></a>해결안2. 자바빈즈(Java Beans)</h3><figure class="highlight java"><figcaption><span>자바빈즈</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">NutiritionFacts coke = <span class="keyword">new</span> NutritionFacts();</span><br><span class="line">coke.setServingSize(<span class="number">240</span>);</span><br><span class="line">coke.setServings(<span class="number">8</span>);</span><br><span class="line">coke.setCalories(<span class="number">100</span>);</span><br><span class="line">coke.setSodium(<span class="number">35</span>);</span><br><span class="line">coke.setCarbohydrate(<span class="number">27</span>);</span><br></pre></td></tr></table></figure>

<p>위 코드는 현업에서 본인이 자주 사용했던 기법이다. 생성자 보다는 확실히 가독성 측면에서는 사용성이 편하지만, 이 부분도 사실 매개변수가 많아지면 불편함이 있고, 소스도 굉장히 길어져서 보기가 싫은 기억이 자주 있다. 그리고 객체 하나를 인스턴스 생성하려면, 위 코드처럼 여러개의 set메소드를 호출 해야한다. 그리고 생성자에서는 각 변수가 어떻게 나와야하는지 지정을 해주지만, 자바빈즈는 개발자가 set메서드를 입력해야하기 때문에 지정된 매개변수를 넣기가 힘들어서, 코드 일관성이 깨져서,버그를 유발시키기도하고, 또한 자바빈즈는 클래스를 불변클래스(아이템17)으로 만들수 없으며, 스레드 안정성을 얻으려면 추가적인 작업해줘야한다. (lock) 이런 단점을 보완 하기 위해 객체 Freezing을 수행한다고 한다.</p>
<p>그럼 Object Freezing이란? 멀티 스레드 환경에서 객체내에 각 변수을 get할때 freeze 를 synchronized 가 되었는지 확인하고 freeze를 수행 하는데 멀티 스레드 환경이다 보니, 그 변수를 사용중에 있는데 set하는 불상사가 발생하게 된다면, 해당 변수가 set되어지는것을 방지하기 위해서 freeze된부분이 true이면 예외를 던져서 set하지 못하도록 막는 부분이 Object Freezing이다. 쉽게 말하면 화장실 변기에 앉아서 볼일을 보고있는데, 갑자기 뒷사람이 문을 열더니, 너 놔와! 하면서 내동댕이 치고, 쫒겨나는 현상이라 생각하면 될것 같다. 이런 상황을 미연에 방지하기 위해 사용중이라고 문밖에 표시를 하고, 문 잠그고 안전하게 볼일볼수있도록 도와주는 부분을 Freezing 한다라고 개인적으로 이해했다. </p>
<h3 id="해결안3-빌더패턴"><a href="#해결안3-빌더패턴" class="headerlink" title="해결안3. 빌더패턴"></a>해결안3. 빌더패턴</h3><figure class="highlight java"><figcaption><span>빌더패턴 심플 버전</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NutritionFacts</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servingSize;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servings; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> calories; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> fat; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> sodium; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> carbohydrate; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line">		<span class="comment">//필수 매개변수 </span></span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servingSize; </span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> servings;</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="comment">//선택적 매개변수</span></span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">int</span> calories = <span class="number">0</span>; </span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">int</span> fat = <span class="number">0</span>; </span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">int</span> sodium = <span class="number">0</span>; </span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">int</span> carbohydrate = <span class="number">0</span>;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="title">Builder</span><span class="params">(<span class="keyword">int</span> servingSize, <span class="keyword">int</span> servings)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.servingSize = servingSize; </span><br><span class="line">			<span class="keyword">this</span>.servings = servings; </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> Builder <span class="title">calories</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">			calories = val; </span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> Builder <span class="title">fat</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">			fat = val; </span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> Builder <span class="title">sodium</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">			sodium = val; </span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> Builder <span class="title">carbohydrate</span><span class="params">(<span class="keyword">int</span> val)</span> </span>&#123;</span><br><span class="line">			carbohydrate = val; </span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">public</span> NuritionFacts <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> NuritionFacts(<span class="keyword">this</span>); </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">NuritionFacts</span><span class="params">(Builder bulider)</span> </span>&#123;</span><br><span class="line">		servingSize = builder.servingSize; </span><br><span class="line">		servings = builder.servings; </span><br><span class="line">		calories = builder.calories; </span><br><span class="line">		fat = builder.fat; </span><br><span class="line">		sodium = builder.sodium; </span><br><span class="line">		carbohydrate = builder.carbohydrate; </span><br><span class="line">	&#125;</span><br><span class="line">	&#125;</span><br></pre></td></tr></table></figure>

<p>책에서는 핵심만 도드라져 보이도록 유효성 검사 코드는 생략했다고한다. 잘못된 매개변수임을 유효성 검토하려면, 빌더의 생성자와 메서드에서 입력매개변수를 검사하고, build 메서드가 호출하는 생성자에서 여러 매개변수에 걸친 불변식 (invariant)을 검사하자. (invalid메서드 만들어서 객체가 정말 유효한지 검증하자는 말이다.) </p>
<blockquote><p>Class Invariant?<br><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Class_invariant">https://en.wikipedia.org/wiki/Class_invariant</a><br>위 위키 사이트에 잘 명시가 되어있는데, 말이 어려워서 그렇지 결국 유효성 검증을 하라는 말이다.<br>예를들어 1월은 1~31일까지 있는데 32일까지 나오는것로 표기되면 오류 이기 때문에, 객체 생성 시점 전에 assert를 하라는 소리이다. </p>
</blockquote>

<figure class="highlight java"><figcaption><span>빌더패턴 인스턴스 생성부</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NutiritionFacts coke = <span class="keyword">new</span> NutritionFacts.Builder(<span class="number">240</span>,<span class="number">8</span>).calories(<span class="number">100</span>).sodium(<span class="number">35</span>).carbohydrate(<span class="number">27</span>).build();</span><br></pre></td></tr></table></figure>

<p>길고 긴 Builder를 작성하고 나면, 위와같이 간단하게(?) 객체를 생성할수 있다. 딱 봐도 가독성이 좋고, 필수 매개변수 와 옵션 매개변수를 나눌수가 있어서, 필수 매개변수 이외에 옵션으로 불필요 매개변수는 빼고 객체를 넣어도 상관이 없다.<br>그리고 <strong>빌더 패턴은 계층적으로 설계된 클래스와 함께 쓰기에 좋다.</strong> 주저리 주저리 하는것 보다 아래 코드를 보자. </p>
<figure class="highlight java"><figcaption><span>Pizza Abstract Builder</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Pizza</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Topping</span> </span>&#123;HAM, MUSHROOM, ONION, PEPPER, SAUAGE&#125;</span><br><span class="line">	<span class="keyword">final</span> Set&lt;Topping&gt; toppings; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">abstract</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span>&lt;<span class="title">T</span> <span class="keyword">extends</span> <span class="title">Builder</span>&lt;<span class="title">T</span>&gt;&gt; </span>&#123;</span><br><span class="line">		EnumSet&lt;Topping&gt; toppings = EnumSet.noneOf(Topping.class);</span><br><span class="line">		<span class="function"><span class="keyword">public</span> T <span class="title">addTopping</span><span class="params">(Topping topping)</span> </span>&#123;</span><br><span class="line">			toppings.add(Objects.requireNonNull(topping)); </span><br><span class="line">			<span class="keyword">return</span> self(); </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="function"><span class="keyword">abstract</span> Pizza <span class="title">build</span><span class="params">()</span></span>; </span><br><span class="line">		</span><br><span class="line">		<span class="comment">// 하위 클래스는 이 메서드를 재정의 하여 this를 반환하도록 해야한다. </span></span><br><span class="line">		<span class="function"><span class="keyword">protected</span> <span class="keyword">abstract</span> T <span class="title">self</span><span class="params">()</span></span>; </span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	Pizza(Builder&lt;?&gt; builder) &#123;</span><br><span class="line">		toppings = builder.toppings.clone(); <span class="comment">//아이템 50 참고 </span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>NyPizza Builder</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NyPizza</span> <span class="keyword">extends</span> <span class="title">Pizza</span> </span>&#123; </span><br><span class="line">	<span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Size</span> </span>&#123;SMALL, MEDIUM, LARGE&#125;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> Size size; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> <span class="keyword">extends</span> <span class="title">Pizza</span>.<span class="title">Builder</span>&lt;<span class="title">Builder</span>&gt; </span>&#123;</span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">final</span> Size size; </span><br><span class="line">		</span><br><span class="line">		<span class="function">pubilc <span class="title">Builder</span><span class="params">(Size size)</span> </span>&#123;</span><br><span class="line">			<span class="keyword">this</span>.size = Objects.requireNonNull(size); </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> NyPizza <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> NyPizza(<span class="keyword">this</span>); </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="meta">@Override</span> </span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">protected</span> Builder <span class="title">self</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">NyPizza</span><span class="params">(Builder builder)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>(builder); </span><br><span class="line">		size = builder.size; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>Calzone Builder</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Calzone</span> <span class="keyword">extends</span> <span class="title">Pizza</span> </span>&#123; </span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">boolean</span> sauceInside; </span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> <span class="keyword">extends</span> <span class="title">Pizza</span>.<span class="title">Builder</span>&lt;<span class="title">Builder</span>&gt; </span>&#123;</span><br><span class="line">		<span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">boolean</span> sauceInside;</span><br><span class="line">		</span><br><span class="line">		<span class="function">pubilc Builder <span class="title">sauceInside</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			sauceInside = <span class="keyword">true</span>; </span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="meta">@Override</span></span><br><span class="line">		<span class="function"><span class="keyword">public</span> Calzone <span class="title">build</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">new</span> Calzone(<span class="keyword">this</span>); </span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		<span class="meta">@Override</span> </span><br><span class="line">		<span class="function"><span class="keyword">public</span> <span class="keyword">protected</span> Builder <span class="title">self</span><span class="params">()</span> </span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="keyword">this</span>; </span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Calzone</span><span class="params">(Builder builder)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>(builder); </span><br><span class="line">		sauceInside = builder.sauceInside; </span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><figcaption><span>Calzone Builder</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NyPizza pizza = <span class="keyword">new</span> NyPizza.Builder(SMALL).addTopping(SAUSAGE).addTopping(ONION).build();</span><br><span class="line">CalZone calzone = <span class="keyword">new</span> Calzone.Builder().addTopping(HAM).sauceInside().build(); </span><br></pre></td></tr></table></figure>

<p>위 코드 처럼 Pizza 추상 클래스를 확장받아서 NyPizza 와 Calzone를 구현하였다. 그래서 기본적으로 addTopping은 하위 클래스에서 사용하고,<br>각각 하위 클래스에서 필수 파라미터로 지정한 부분만 추가적으로 세팅을 한 부분을 확인 할 수 있다.(size, sauceInside)  </p>
<p>이처럼 빌더패턴은 상당히 유연한 객체로 가변인수를 사용할수있고, 각각 적절한 메서드로 나눠서 선언할수도있고, 메서드를 여러번 호출하도록 하고 각 호출때 넘겨진 매개변수들을 하나의 필드로 모을수도 있다. 그리고 빌더에 넘기는 매개변수에 따라 다른 객체를 만들수도 있다.<br>(앞의 예제 처럼 가능하다는 것이다.)</p>
<blockquote><p><strong>생성자나 정적 팩터리가 처리해야 할 매개변수가 많다면 빌더 패턴을 선택하는 게 더 낫다.</strong><br>=&gt; 매개변수 중 다수가 필수가 아니거나 같은 타입이면 특히 더 그렇다. 빌더는 점층적 생성자보다 클라이언트 코드를 읽고 쓰기가 훨씬 간결하고,<br>자바빈즈보다 훨씬 안전하다. </p>
</blockquote>

<p>내가 겪은 현업에서는 요즘들어서 빌더가 자주 보이는 편이고, 아직까지는 많이 사용되고 있지는 않는듯하다. 앞으로 복잡하고 큰 도메인 일수록 빌더를 구현해보는것도 나쁘지는 않을듯하다.<br>단, 매개변수가 최소 4개이상은 받을거라는 전제하에.. 직접 짜는것보다 롬복 @Builder를 통해서 사용할 경우가 많을수도 있지만, 너무 롬복에 의존하지말고, 상황에 따라서 직접 짜는 부분도 고려하도록 하자. </p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2021/01/16/java-effective-2/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="/categories/Study/"
                aria-label="NEWER POSTS"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
        <li class="pagination-number">page 2 of 2</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2021 codexdawn. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">codexdawn</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover-v1.2.0.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-ikbi0v8fyzuu91xv5rmpcrnwb4qinfgborzd5kejmj8wr6ibfra8oaxqshyg.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
